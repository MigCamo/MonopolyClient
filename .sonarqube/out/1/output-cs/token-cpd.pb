 %
?D:\Proyectos .NET\UIGameClientTourist\GameLogic\MusicService.cs
	namespace 	
UIGameClientTourist
 
. 
	GameLogic '
{ 
public 

class 
MusicService 
{ 
private 
static 
MusicService #
	_instance$ -
;- .
private 
readonly 
WaveOutEvent %
_waveOut& .
;. /
private 
readonly 
AudioFileReader (
_audioFileReader) 9
;9 :
private 
MusicService 
( 
) 
{ 	
_waveOut 
= 
new 
WaveOutEvent '
(' (
)( )
;) *
string 
projectDirectory #
=$ %
	Directory& /
./ 0
	GetParent0 9
(9 :
Environment: E
.E F
CurrentDirectoryF V
)V W
.W X
ParentX ^
.^ _
FullName_ g
;g h
string 
filePath 
= 
Path "
." #
Combine# *
(* +
projectDirectory+ ;
,; <
$str= L
,L M
$strN U
,U V
$str	W ¨
)
¨ ©
;
© ª
_audioFileReader 
= 
new "
AudioFileReader# 2
(2 3
filePath3 ;
); <
;< =
_waveOut 
. 
Init 
( 
_audioFileReader *
)* +
;+ ,
} 	
public 
static 
MusicService "
Instance# +
{ 	
get 
{ 
if   
(   
	_instance   
==    
null  ! %
)  % &
{!! 
	_instance"" 
="" 
new""  #
MusicService""$ 0
(""0 1
)""1 2
;""2 3
}## 
return$$ 
	_instance$$  
;$$  !
}%% 
}&& 	
public(( 
void(( 
	PlayMusic(( 
((( 
)(( 
{)) 	
if** 
(** 
_waveOut** 
.** 
PlaybackState** &
==**' )
PlaybackState*** 7
.**7 8
Stopped**8 ?
)**? @
{++ 
_audioFileReader,,  
.,,  !
Position,,! )
=,,* +
$num,,, -
;,,- .
_waveOut-- 
.-- 
Play-- 
(-- 
)-- 
;--  
}.. 
else// 
if// 
(// 
_waveOut// 
.// 
PlaybackState// +
==//, .
PlaybackState/// <
.//< =
Paused//= C
)//C D
{00 
_waveOut11 
.11 
Play11 
(11 
)11 
;11  
}22 
}33 	
public55 
void55 

PauseMusic55 
(55 
)55  
{66 	
if77 
(77 
_waveOut77 
.77 
PlaybackState77 &
==77' )
PlaybackState77* 7
.777 8
Playing778 ?
)77? @
{88 
_waveOut99 
.99 
Pause99 
(99 
)99  
;99  !
}:: 
};; 	
public== 
void== 
	StopMusic== 
(== 
)== 
{>> 	
if?? 
(?? 
_waveOut?? 
.?? 
PlaybackState?? &
!=??' )
PlaybackState??* 7
.??7 8
Stopped??8 ?
)??? @
{@@ 
_waveOutAA 
.AA 
StopAA 
(AA 
)AA 
;AA  
_audioFileReaderBB  
.BB  !
PositionBB! )
=BB* +
$numBB, -
;BB- .
}CC 
}DD 	
publicFF 
voidFF 
	SetVolumeFF 
(FF 
doubleFF $
volumeFF% +
)FF+ ,
{GG 	
ifHH 
(HH 
volumeHH 
<HH 
$numHH 
)HH 
volumeII 
=II 
$numII 
;II 
elseJJ 
ifJJ 
(JJ 
volumeJJ 
>JJ 
$numJJ 
)JJ  
volumeKK 
=KK 
$numKK 
;KK 
_waveOutLL 
.LL 
VolumeLL 
=LL 
(LL 
floatLL $
)LL$ %
volumeLL% +
;LL+ ,
}MM 	
}NN 
}OO  (
ED:\Proyectos .NET\UIGameClientTourist\XAMLViews\Configuration.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
Configuration &
:' (
Window) /
{ 
private 
int 
idPlayer 
; 
public 
Configuration 
( 
int  
idPlayer! )
)) *
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
idPlayer 
= 
idPlayer $
;$ %
fullcomboBox 
( 
) 
; 
} 	
private!! 
void!! 
fullcomboBox!! !
(!!! "
)!!" #
{"" 	
cboxLanguages## 
.## 
Items## 
.##  
Add##  #
(### $

Properties##$ .
.##. /
	Resources##/ 8
.##8 9!
LanguageSpanish_Label##9 N
)##N O
;##O P
cboxLanguages$$ 
.$$ 
Items$$ 
.$$  
Add$$  #
($$# $

Properties$$$ .
.$$. /
	Resources$$/ 8
.$$8 9!
LanguageEnglish_Label$$9 N
)$$N O
;$$O P
}%% 	
private'' 
void'' 
ChangeLanguage'' #
(''# $
object''$ *
sender''+ 1
,''1 2%
SelectionChangedEventArgs''3 L
e''M N
)''N O
{(( 	
if)) 
()) 
cboxLanguages)) 
.)) 
SelectedItem)) *
!=))+ -
null)). 2
)))2 3
{** 
string++ 
selectedLanguage++ '
=++( )
cboxLanguages++* 7
.++7 8
SelectedItem++8 D
.++D E
ToString++E M
(++M N
)++N O
;++O P
if-- 
(-- 
selectedLanguage-- $
==--% '

Properties--( 2
.--2 3
	Resources--3 <
.--< =!
LanguageSpanish_Label--= R
)--R S
{.. 
App// 
.// 
SetAppCulture// %
(//% &
$str//& -
)//- .
;//. /
}00 
else11 
if11 
(11 
selectedLanguage11 )
==11* ,

Properties11- 7
.117 8
	Resources118 A
.11A B!
LanguageEnglish_Label11B W
)11W X
{22 
App33 
.33 
SetAppCulture33 %
(33% &
$str33& -
)33- .
;33. /
}44 
Configuration66 
configurationWindow66 1
=662 3
new664 7
Configuration668 E
(66E F
idPlayer66F N
)66N O
;66O P
this77 
.77 
Close77 
(77 
)77 
;77 
configurationWindow88 #
.88# $
Show88$ (
(88( )
)88) *
;88* +
}99 
}:: 	
private<< 
void<< "
NavigateToMainMenuGame<< +
(<<+ ,
object<<, 2
sender<<3 9
,<<9 :
RoutedEventArgs<<; J
e<<K L
)<<L M
{== 	
MainMenuGame>> 

menuWindow>> #
=>>$ %
new>>& )
MainMenuGame>>* 6
(>>6 7
idPlayer>>7 ?
)>>? @
;>>@ A
this?? 
.?? 
Close?? 
(?? 
)?? 
;?? 

menuWindow@@ 
.@@ 
Show@@ 
(@@ 
)@@ 
;@@ 
}AA 	
privateCC 
voidCC $
VolumeSliderValueChangedCC -
(CC- .
objectCC. 4
senderCC5 ;
,CC; <*
RoutedPropertyChangedEventArgsCC= [
<CC[ \
doubleCC\ b
>CCb c
eCCd e
)CCe f
{DD 	
doubleEE 
volumeValueEE 
=EE  
volumeSliderEE! -
.EE- .
ValueEE. 3
;EE3 4
MusicServiceFF 
.FF 
InstanceFF !
.FF! "
	SetVolumeFF" +
(FF+ ,
volumeValueFF, 7
)FF7 8
;FF8 9
}GG 	
privateII 
voidII 
ButPlayMusicII !
(II! "
objectII" (
senderII) /
,II/ 0
RoutedEventArgsII1 @
eIIA B
)IIB C
{JJ 	
MusicServiceKK 
.KK 
InstanceKK !
.KK! "
	PlayMusicKK" +
(KK+ ,
)KK, -
;KK- .
}LL 	
privateNN 
voidNN 
ButPauseMusicNN "
(NN" #
objectNN# )
senderNN* 0
,NN0 1
RoutedEventArgsNN2 A
eNNB C
)NNC D
{OO 	
MusicServicePP 
.PP 
InstancePP !
.PP! "
	StopMusicPP" +
(PP+ ,
)PP, -
;PP- .
}RR 	
}SS 
}TT Çj
?D:\Proyectos .NET\UIGameClientTourist\XAMLViews\Friends.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
Friends  
:! "
Window# )
,) *
Service+ 2
.2 3
IFriendsCallback3 C
{ 
private 
readonly 
int 
idPlayer %
;% &
private 
readonly 
Service  
.  !
FriendListClient! 1
friendListService2 C
;C D
Service 
. 
FriendsClient 
SesionService +
;+ ,
public 
Friends 
( 
int 
idPlayer #
)# $
{ 	
InstanceContext 
context #
=$ %
new& )
InstanceContext* 9
(9 :
this: >
)> ?
;? @
SesionService   
=   
new   
Service    '
.  ' (
FriendsClient  ( 5
(  5 6
context  6 =
)  = >
;  > ?
friendListService!! 
=!! 
new!!  #
Service!!$ +
.!!+ ,
FriendListClient!!, <
(!!< =
)!!= >
;!!> ?
SesionService"" 
."" 
UpdatePlayerSession"" -
(""- .
idPlayer"". 6
)""6 7
;""7 8
this## 
.## 
idPlayer## 
=## 
idPlayer## $
;##$ %
InitializeComponent$$ 
($$  
)$$  !
;$$! "
ShowFriends%% 
(%% 
idPlayer%%  
)%%  !
;%%! "

AddRequest&& 
(&& 
idPlayer&& 
)&&  
;&&  !
}'' 	
private)) 
void)) 
ShowFriends))  
())  !
int))! $
idPlayer))% -
)))- .
{** 	
FriendListDisplay++ 
.++ 
Children++ &
.++& '
Clear++' ,
(++, -
)++- .
;++. /
foreach,, 
(,, 

FriendList,, 
friend,,  &
in,,' )
friendListService,,* ;
.,,; <

GetFriends,,< F
(,,F G
idPlayer,,G O
),,O P
),,P Q
{-- 
Border.. 
brdBackground.. $
=..% &
new..' *
Border..+ 1
{// 
Width00 
=00 
$num00 
,00  
Height11 
=11 
$num11 
,11  

Background22 
=22  
Brushes22! (
.22( )
	LightBlue22) 2
,222 3
Margin33 
=33 
new33  
	Thickness33! *
(33* +
$num33+ ,
)33, -
,33- .
}44 
;44 
Grid66 
grid66 
=66 
new66 
Grid66  $
(66$ %
)66% &
;66& '
Ellipse88 
ellUserStatus88 %
=88& '
new88( +
Ellipse88, 3
{99 
Width:: 
=:: 
$num:: 
,:: 
Height;; 
=;; 
$num;; 
,;;  
Margin<< 
=<< 
new<<  
	Thickness<<! *
(<<* +
-<<+ ,
$num<<, /
,<</ 0
$num<<1 2
,<<2 3
$num<<4 5
,<<5 6
$num<<7 8
)<<8 9
,<<9 :
}== 
;== 
if?? 
(?? 
friend?? 
.?? 
IsOnline?? #
)??# $
{@@ 
ellUserStatusAA !
.AA! "
FillAA" &
=AA' (
BrushesAA) 0
.AA0 1
GreenAA1 6
;AA6 7
}BB 
elseCC 
{DD 
ellUserStatusEE !
.EE! "
FillEE" &
=EE' (
BrushesEE) 0
.EE0 1
RedEE1 4
;EE4 5
}FF 
LabelHH 
lblUserNameHH !
=HH" #
newHH$ '
LabelHH( -
{II 
ContentJJ 
=JJ 
friendJJ $
.JJ$ %

FriendNameJJ% /
,JJ/ 0
FontSizeKK 
=KK 
$numKK !
,KK! "
MarginLL 
=LL 
newLL  
	ThicknessLL! *
(LL* +
$numLL+ -
,LL- .
$numLL/ 0
,LL0 1
$numLL2 3
,LL3 4
$numLL5 6
)LL6 7
,LL7 8
}MM 
;MM 
gridOO 
.OO 
ChildrenOO 
.OO 
AddOO !
(OO! "
ellUserStatusOO" /
)OO/ 0
;OO0 1
gridPP 
.PP 
ChildrenPP 
.PP 
AddPP !
(PP! "
lblUserNamePP" -
)PP- .
;PP. /
brdBackgroundQQ 
.QQ 
ChildQQ #
=QQ$ %
gridQQ& *
;QQ* +
FriendListDisplayRR !
.RR! "
ChildrenRR" *
.RR* +
AddRR+ .
(RR. /
brdBackgroundRR/ <
)RR< =
;RR= >
}SS 
}UU 	
privateWW 
voidWW 
SendFriendRequestWW &
(WW& '
objectWW' -
senderWW. 4
,WW4 5
RoutedEventArgsWW6 E
eWWF G
)WWG H
{XX 	
switchYY 
(YY 
SesionServiceYY !
.YY! "
MakeFriendRequestYY" 3
(YY3 4
idPlayerYY4 <
,YY< =
	TxtFriendYY> G
.YYG H
TextYYH L
)YYL M
)YYM N
{ZZ 
case[[ 
$num[[ 
:[[ 

MessageBox\\ 
.\\ 
Show\\ #
(\\# $

Properties\\$ .
.\\. /
	Resources\\/ 8
.\\8 94
(AlertConfirmationSendFriendRequest_Label\\9 a
)\\a b
;\\b c
break]] 
;]] 
case^^ 
$num^^ 
:^^ 

MessageBox__ 
.__ 
Show__ #
(__# $

Properties__$ .
.__. /
	Resources__/ 8
.__8 9+
AlreadyExistingAmigoAlert_Label__9 X
)__X Y
;__Y Z
break`` 
;`` 
caseaa 
$numaa 
:aa 

MessageBoxbb 
.bb 
Showbb #
(bb# $

Propertiesbb$ .
.bb. /
	Resourcesbb/ 8
.bb8 9#
AlertExistingUser_Labelbb9 P
)bbP Q
;bbQ R
breakcc 
;cc 
casedd 
$numdd 
:dd 

MessageBoxee 
.ee 
Showee #
(ee# $

Propertiesee$ .
.ee. /
	Resourcesee/ 8
.ee8 9&
AlertExistingRequest_Labelee9 S
)eeS T
;eeT U
breakff 
;ff 
}gg 
}hh 	
privatejj 
voidjj 

AddRequestjj 
(jj  
intjj  #
IdPlayerjj$ ,
)jj, -
{kk 	
RequestListll 
.ll 
Childrenll  
.ll  !
Clearll! &
(ll& '
)ll' (
;ll( )
foreachmm 
(mm 
varmm 
requestmm  
inmm! #
friendListServicemm$ 5
.mm5 6
GetFriendRequestsmm6 G
(mmG H
IdPlayermmH P
)mmP Q
)mmQ R
{nn 
Borderoo 
brdBackgroundoo $
=oo% &
newoo' *
Borderoo+ 1
{pp 
Widthqq 
=qq 
$numqq 
,qq  
Heightrr 
=rr 
$numrr 
,rr  

Backgroundss 
=ss  
Brushesss! (
.ss( )
	LightBluess) 2
,ss2 3
Margintt 
=tt 
newtt  
	Thicknesstt! *
(tt* +
$numtt+ ,
)tt, -
,tt- .
}uu 
;uu 
Gridww 
gridww 
=ww 
newww 
Gridww  $
(ww$ %
)ww% &
;ww& '
Labelyy 
lblUserNameyy !
=yy" #
newyy$ '
Labelyy( -
{zz 
Content{{ 
={{ 
request{{ %
.{{% &

SenderName{{& 0
,{{0 1
FontSize|| 
=|| 
$num|| !
,||! "
Margin}} 
=}} 
new}}  
	Thickness}}! *
(}}* +
$num}}+ -
,}}- .
$num}}/ 0
,}}0 1
$num}}2 3
,}}3 4
$num}}5 6
)}}6 7
,}}7 8
}~~ 
;~~ 
Button
 
	butAccept
  
=
! "
new
# &
Button
' -
{
 
Content
 
=
 

Properties
 (
.
( )
	Resources
) 2
.
2 3#
AcceptPurchase_Button
3 H
,
H I
Width
 
=
 
$num
 
,
 
Height
 
=
 
$num
 
,
  
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ .
,
. /
$num
0 2
,
2 3
$num
4 5
,
5 6
$num
7 8
)
8 9
,
9 :
}
 
;
 
Button
 
	butReject
  
=
! "
new
# &
Button
' -
{
 
Content
 
=
 

Properties
 (
.
( )
	Resources
) 2
.
2 3
Reject_Button
3 @
,
@ A
Width
 
=
 
$num
 
,
 
Height
 
=
 
$num
 
,
  
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ .
,
. /
$num
0 2
,
2 3
$num
4 5
,
5 6
$num
7 8
)
8 9
,
9 :
}
 
;
 
	butAccept
 
.
 
Click
 
+=
  "
(
# $
sender
$ *
,
* +
e
, -
)
- .
=>
/ 1
{
2 3
SesionService
 !
.
! "!
AcceptFriendRequest
" 5
(
5 6
request
6 =
.
= >
	IDRequest
> G
)
G H
;
H I

AddRequest
 
(
 
IdPlayer
 '
)
' (
;
( )
ShowFriends
 
(
  
IdPlayer
  (
)
( )
;
) *
}
 
;
 
	butReject
 
.
 
Click
 
+=
  "
(
# $
sender
$ *
,
* +
e
, -
)
- .
=>
/ 1
{
2 3
SesionService
 !
.
! "!
RejectFriendRequest
" 5
(
5 6
request
6 =
.
= >
	IDRequest
> G
)
G H
;
H I

AddRequest
 
(
 
IdPlayer
 '
)
' (
;
( )
ShowFriends
 
(
  
IdPlayer
  (
)
( )
;
) *
}
 
;
 
grid
 
.
 
Children
 
.
 
Add
 !
(
! "
lblUserName
" -
)
- .
;
. /
grid
 
.
 
Children
 
.
 
Add
 !
(
! "
	butAccept
" +
)
+ ,
;
, -
grid
 
.
 
Children
 
.
 
Add
 !
(
! "
	butReject
" +
)
+ ,
;
, -
brdBackground
 
.
 
Child
 #
=
$ %
grid
& *
;
* +
RequestList
   
.
   
Children
   $
.
  $ %
Add
  % (
(
  ( )
brdBackground
  ) 6
)
  6 7
;
  7 8
}
¡¡ 
}
¢¢ 	
private
¤¤ 
void
¤¤ "
GoMainMenuGameWindow
¤¤ )
(
¤¤) *
object
¤¤* 0
sender
¤¤1 7
,
¤¤7 8
RoutedEventArgs
¤¤9 H
e
¤¤I J
)
¤¤J K
{
¥¥ 	
MainMenuGame
¦¦ 

menuWindow
¦¦ #
=
¦¦$ %
new
¦¦& )
MainMenuGame
¦¦* 6
(
¦¦6 7
idPlayer
¦¦7 ?
)
¦¦? @
;
¦¦@ A
this
§§ 
.
§§ 
Close
§§ 
(
§§ 
)
§§ 
;
§§ 

menuWindow
¨¨ 
.
¨¨ 
Show
¨¨ 
(
¨¨ 
)
¨¨ 
;
¨¨ 
}
©© 	
public
«« 
void
«« !
UpdateFriendRequest
«« '
(
««' (
)
««( )
{
¬¬ 	

AddRequest
­­ 
(
­­ 
idPlayer
­­ 
)
­­  
;
­­  !
}
®® 	
public
°° 
void
°° !
UpdateFriendDisplay
°° '
(
°°' (
)
°°( )
{
±± 	
ShowFriends
²² 
(
²² 
idPlayer
²²  
)
²²  !
;
²²! "
}
³³ 	
}
´´ 
}µµ ©
<D:\Proyectos .NET\UIGameClientTourist\XAMLViews\Game.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
Game 
: 
Window  &
,& '%
IGameLogicManagerCallback( A
{ 
private 
Service 
. 
Player 
player %
;% &
private 
Service 
. 
Game 
game !
;! "
private 
Service 
. "
GameLogicManagerClient .
managerClient/ <
;< =
readonly 
public 
static 
WinImage '
[' (
]( )
pieces* 0
=1 2
new3 6
WinImage7 ?
[? @
$num@ A
]A B
;B C
private   
List   
<   
Service   
.   
Property   %
>  % &
Myproperties  ' 3
;  3 4
private!! 
Bid!! 
LastBid!! 
=!! 
new!! !
Bid!!" %
(!!% &
)!!& '
;!!' (
public## 
Game## 
(## 
Service## 
.## 
Game##  
game##! %
,##% &
Service##' .
.##. /
Player##/ 5
player##6 <
)##< =
{$$ 	
InstanceContext%% 
context%% #
=%%$ %
new%%& )
InstanceContext%%* 9
(%%9 :
this%%: >
)%%> ?
;%%? @
managerClient&& 
=&& 
new&& 
Service&&  '
.&&' ("
GameLogicManagerClient&&( >
(&&> ?
context&&? F
)&&F G
;&&G H
managerClient'' 
.'' 
UpdatePlayerService'' -
(''- .
player''. 4
.''4 5
IdPlayer''5 =
,''= >
game''? C
.''C D
IdGame''D J
)''J K
;''K L
this(( 
.(( 
player(( 
=(( 
player((  
;((  !
this)) 
.)) 
game)) 
=)) 
game)) 
;)) 
InitializeComponent** 
(**  
)**  !
;**! "
InitializeUsers++ 
(++ 
)++ 
;++ !
InitializeBoardPieces,, !
(,,! "
),," #
;,,# $ 
InitializeComboBoxes--  
(--  !
)--! "
;--" #
}.. 	
private00 
void00 
InitializeUsers00 $
(00$ %
)00% &
{11 	
imgPlayerPiece22 
.22 
Source22 !
=22" #
ImageManager22$ 0
.220 1
GetSourceImage221 ?
(22? @
player22@ F
.22F G
Token22G L
.22L M
ImagenSource22M Y
)22Y Z
;22Z [
lblPlayerTurn33 
.33 
Content33 !
=33" #
game33$ (
.33( )
Players33) 0
.330 1
Peek331 5
(335 6
)336 7
.337 8
Name338 <
;33< =
lblPlayerTurn44 
.44 &
HorizontalContentAlignment44 4
=445 6
HorizontalAlignment447 J
.44J K
Center44K Q
;44Q R
lblPlayerTurn55 
.55 $
VerticalContentAlignment55 2
=553 4
VerticalAlignment555 F
.55F G
Center55G M
;55M N
Service66 
.66 
PlayerClient66  
playerClient66! -
=66. /
new660 3
Service664 ;
.66; <
PlayerClient66< H
(66H I
)66I J
;66J K
lblUserName77 
.77 
Content77 
=77  !
playerClient77" .
.77. /
GetMyPlayersName77/ ?
(77? @
player77@ F
.77F G
IdPlayer77G O
,77O P
game77Q U
.77U V
IdGame77V \
)77\ ]
;77] ^
lblPlayerMoney88 
.88 
Content88 "
=88# $
$"88% '
$str88' *
{88* +
player88+ 1
.881 2
Money882 7
}887 8
$str888 <
"88< =
;88= >
Myproperties99 
=99 
new99 
List99 #
<99# $
Service99$ +
.99+ ,
Property99, 4
>994 5
(995 6
)996 7
;997 8
}:: 	
private<< 
void<<  
InitializeComboBoxes<< )
(<<) *
)<<* +
{== 	
cboNumerHouse>> 
.>> 
Items>> 
.>>  
Add>>  #
(>># $
$num>>$ %
)>>% &
;>>& '
cboNumerHouse?? 
.?? 
Items?? 
.??  
Add??  #
(??# $
$num??$ %
)??% &
;??& '
cboNumerHouse@@ 
.@@ 
Items@@ 
.@@  
Add@@  #
(@@# $
$num@@$ %
)@@% &
;@@& '
cboNumerHouseAA 
.AA 
ItemsAA 
.AA  
AddAA  #
(AA# $
$numAA$ %
)AA% &
;AA& '
cboHotelBB 
.BB 
ItemsBB 
.BB 
AddBB 
(BB 
$strBB #
)BB# $
;BB$ %
cboHotelCC 
.CC 
ItemsCC 
.CC 
AddCC 
(CC 
$strCC #
)CC# $
;CC$ %
}DD 	
privateFF 
voidFF !
InitializeBoardPiecesFF *
(FF* +
)FF+ ,
{GG 	
piecesHH 
[HH 
$numHH 
]HH 
=HH 
	imgPiece1HH !
;HH! "
piecesII 
[II 
$numII 
]II 
=II 
	imgPiece2II !
;II! "
piecesJJ 
[JJ 
$numJJ 
]JJ 
=JJ 
	imgPiece3JJ !
;JJ! "
piecesKK 
[KK 
$numKK 
]KK 
=KK 
	imgPiece4KK !
;KK! "
}LL 	
privateNN 
voidNN 
	PauseGameNN 
(NN 
objectNN %
senderNN& ,
,NN, -
KeyEventArgsNN. :
eNN; <
)NN< =
{OO 	
ifPP 
(PP 
ePP 
.PP 
KeyPP 
==PP 
KeyPP 
.PP 
EscapePP #
)PP# $
{QQ 
grdPauseMenuRR 
.RR 

VisibilityRR '
=RR( )

VisibilityRR* 4
.RR4 5
VisibleRR5 <
;RR< =
butRollingDiceSS 
.SS 
	IsEnabledSS (
=SS) *
falseSS+ 0
;SS0 1
eTT 
.TT 
HandledTT 
=TT 
trueTT  
;TT  !
}UU 
}VV 	
privateXX 
voidXX 
RestartGameXX  
(XX  !
objectXX! '
senderXX( .
,XX. /
RoutedEventArgsXX0 ?
eXX@ A
)XXA B
{YY 	
grdPauseMenuZZ 
.ZZ 

VisibilityZZ #
=ZZ$ %

VisibilityZZ& 0
.ZZ0 1
	CollapsedZZ1 :
;ZZ: ;
butRollingDice[[ 
.[[ 
	IsEnabled[[ $
=[[% &
true[[' +
;[[+ ,
}\\ 	
private^^ 
void^^ 
GoToMenuFromGame^^ %
(^^% &
object^^& ,
sender^^- 3
,^^3 4
RoutedEventArgs^^5 D
e^^E F
)^^F G
{__ 	
MainMenuGame`` 
mainMenuGameWindow`` +
=``, -
new``. 1
MainMenuGame``2 >
(``> ?
player``? E
.``E F
IdPlayer``F N
)``N O
;``O P
thisaa 
.aa 
Closeaa 
(aa 
)aa 
;aa 
mainMenuGameWindowbb 
.bb 
Showbb #
(bb# $
)bb$ %
;bb% &
}cc 	
privateee 
voidee $
AnimationMovePlayerCardXee -
(ee- .
WinImageee. 6
pieceee7 <
,ee< =
intee> A
updateXPositioneeB Q
)eeQ R
{ff 	
DoubleAnimationgg 
animationMoveOverXgg .
=gg/ 0
newgg1 4
DoubleAnimationgg5 D
{hh 
Toii 
=ii 
updateXPositionii $
}jj 
;jj 
piecekk 
.kk 
BeginAnimationkk  
(kk  !
Canvaskk! '
.kk' (
LeftPropertykk( 4
,kk4 5
animationMoveOverXkk6 H
)kkH I
;kkI J
}ll 	
privatenn 
voidnn $
AnimationMovePlayerCardYnn -
(nn- .
WinImagenn. 6
piecenn7 <
,nn< =
intnn> A
updateYPositionnnB Q
)nnQ R
{oo 	
DoubleAnimationpp 
animationMoveOverYpp .
=pp/ 0
newpp1 4
DoubleAnimationpp5 D
{qq 
Torr 
=rr 
updateYPositionrr $
}ss 
;ss 
piecett 
.tt 
BeginAnimationtt  
(tt  !
Canvastt! '
.tt' (
TopPropertytt( 3
,tt3 4
animationMoveOverYtt5 G
)ttG H
;ttH I
}uu 	
privateww 
voidww 

PlayMyTurnww 
(ww  
objectww  &
senderww' -
,ww- .
RoutedEventArgsww/ >
eww? @
)ww@ A
{xx 	
managerClientyy 
.yy 
PlayTurnyy "
(yy" #
thisyy# '
.yy' (
gameyy( ,
)yy, -
;yy- .
butRollingDicezz 
.zz 

Visibilityzz %
=zz& '

Visibilityzz( 2
.zz2 3
	Collapsedzz3 <
;zz< =

ButEndTurn{{ 
.{{ 

Visibility{{ !
={{" #

Visibility{{$ .
.{{. /
Visible{{/ 6
;{{6 7
}|| 	
private}} 
void}} 
AccommodatePart}} $
(}}$ %
WinImage}}% -
piece}}. 3
,}}3 4
Service}}5 <
.}}< =
Player}}= C
player}}D J
,}}J K
Service}}L S
.}}S T
Property}}T \
property}}] e
)}}e f
{~~ 	
int 
initialXPiece 
= 
$num  "
;" #
int
 
initialYPiece
 
=
 
$num
  "
;
" #
int
  
PiecesInSameSquare
 "
=
# $%
CheckPieceCountInSquare
% <
(
< =
player
= C
)
C D
;
D E
if
 
(
  
PiecesInSameSquare
 "
==
# %
$num
& '
)
' (
{
 &
AnimationMovePlayerCardX
 (
(
( )
piece
) .
,
. /
initialXPiece
0 =
+
> ?
property
@ H
.
H I
PosicitionX
I T
)
T U
;
U V
}
 
if
 
(
  
PiecesInSameSquare
 "
==
# %
$num
& '
)
' (
{
 &
AnimationMovePlayerCardY
 (
(
( )
piece
) .
,
. /
initialYPiece
0 =
+
> ?
property
@ H
.
H I
PosicitionY
I T
)
T U
;
U V
}
 
if
 
(
  
PiecesInSameSquare
 "
==
# %
$num
& '
)
' (
{
 &
AnimationMovePlayerCardY
 (
(
( )
piece
) .
,
. /
initialYPiece
0 =
+
> ?
property
@ H
.
H I
PosicitionY
I T
)
T U
;
U V&
AnimationMovePlayerCardX
 (
(
( )
piece
) .
,
. /
initialXPiece
0 =
+
> ?
property
@ H
.
H I
PosicitionX
I T
)
T U
;
U V
}
 
}
 	
private
 
int
 %
CheckPieceCountInSquare
 +
(
+ ,
Service
, 3
.
3 4
Player
4 :
player
; A
)
A B
{
 	
int
 
cont
 
=
 
$num
 
;
 
foreach
 
(
 
var
 
	playerAux
 "
in
# %
game
& *
.
* +
Players
+ 2
)
2 3
{
 
if
 
(
 
player
 
.
 
Position
 #
==
$ &
	playerAux
' 0
.
0 1
Position
1 9
)
9 :
cont
; ?
++
? A
;
A B
}
 
return
 
cont
 
;
 
}
 	
private
 
void
 
UpdateDieFace
 "
(
" #
string
# )
	imagePath
* 3
,
3 4
WinImage
5 =
die
> A
)
A B
{
 	
die
 
.
 
Source
 
=
 
ImageManager
 %
.
% &
GetSourceImage
& 4
(
4 5
	imagePath
5 >
)
> ?
;
? @
}
 	
private
¡¡ 
void
¡¡  
UpdatePropertyCard
¡¡ '
(
¡¡' (
Service
¡¡( /
.
¡¡/ 0
Property
¡¡0 8
property
¡¡9 A
)
¡¡A B
{
¢¢ 	#
imgPropertyPictureBox
££ !
.
££! "
Source
££" (
=
££) *
ImageManager
££+ 7
.
££7 8
GetSourceImage
££8 F
(
££F G
property
££G O
.
££O P
ImageSource
££P [
)
££[ \
;
££\ ]
lblPropertyTitle
¤¤ 
.
¤¤ 
Content
¤¤ $
=
¤¤% &
property
¤¤' /
.
¤¤/ 0
Name
¤¤0 4
;
¤¤4 5
rectPropertyColor
¥¥ 
.
¥¥ 
Fill
¥¥ "
=
¥¥# $
new
¥¥% (
SolidColorBrush
¥¥) 8
(
¥¥8 9
(
¥¥9 :
Color
¥¥: ?
)
¥¥? @
ColorConverter
¥¥@ N
.
¥¥N O
ConvertFromString
¥¥O `
(
¥¥` a
property
¥¥a i
.
¥¥i j
Color
¥¥j o
)
¥¥o p
)
¥¥p q
;
¥¥q r
}
¦¦ 	
private
¨¨ 
void
¨¨ 
UpdateTurnVisual
¨¨ %
(
¨¨% &
)
¨¨& '
{
©© 	
lblPlayerTurn
ªª 
.
ªª 
Content
ªª !
=
ªª" #
game
ªª$ (
.
ªª( )
Players
ªª) 0
.
ªª0 1
Peek
ªª1 5
(
ªª5 6
)
ªª6 7
.
ªª7 8
Name
ªª8 <
;
ªª< =
}
«« 	
private
­­ 
void
­­ 
EndTurn
­­ 
(
­­ 
object
­­ #
sender
­­$ *
,
­­* +
RoutedEventArgs
­­, ;
e
­­< =
)
­­= >
{
®® 	
butRollingDice
¯¯ 
.
¯¯ 

Visibility
¯¯ %
=
¯¯& '

Visibility
¯¯( 2
.
¯¯2 3
Visible
¯¯3 :
;
¯¯: ;

ButEndTurn
°° 
.
°° 

Visibility
°° !
=
°°" #

Visibility
°°$ .
.
°°. /
	Collapsed
°°/ 8
;
°°8 9
butRollingDice
±± 
.
±± 
	IsEnabled
±± $
=
±±% &
false
±±' ,
;
±±, -
managerClient
²² 
.
²² 

UpdateQueu
²² $
(
²²$ %
game
²²% )
.
²²) *
IdGame
²²* 0
)
²²0 1
;
²²1 2
}
³³ 	
void
µµ '
IGameLogicManagerCallback
µµ &
.
µµ& '
PlayDie
µµ' .
(
µµ. /
int
µµ/ 2
firstDieValue
µµ3 @
,
µµ@ A
int
µµB E
SecondDieValue
µµF T
)
µµT U
{
¶¶ 	
string
·· 
imagePathDieOne
·· "
=
··# $
$"
··% '
$str
··' I
{
··I J
firstDieValue
··J W
}
··W X
$str
··X \
"
··\ ]
;
··] ^
string
¸¸  
imagePathDieSecond
¸¸ %
=
¸¸& '
$"
¸¸( *
$str
¸¸* L
{
¸¸L M
SecondDieValue
¸¸M [
}
¸¸[ \
$str
¸¸\ `
"
¸¸` a
;
¸¸a b
UpdateDieFace
¹¹ 
(
¹¹ 
imagePathDieOne
¹¹ )
,
¹¹) *
	imgDieOne
¹¹+ 4
)
¹¹4 5
;
¹¹5 6
UpdateDieFace
ºº 
(
ºº  
imagePathDieSecond
ºº ,
,
ºº, -
imgDieSecond
ºº. :
)
ºº: ;
;
ºº; <
}
»» 	
public
½½ 
void
½½ $
MovePlayerPieceOnBoard
½½ *
(
½½* +
Service
½½+ 2
.
½½2 3
Player
½½3 9
player
½½: @
,
½½@ A
Service
½½B I
.
½½I J
Property
½½J R
property
½½S [
)
½½[ \
{
¾¾ 	
if
ÀÀ 
(
ÀÀ 
player
ÀÀ 
.
ÀÀ 
Position
ÀÀ 
>
ÀÀ  !
$num
ÀÀ" #
)
ÀÀ# $
{
ÁÁ 
player
ÂÂ 
.
ÂÂ 
Position
ÂÂ 
--
ÂÂ !
;
ÂÂ! "
}
ÃÃ 
if
ÄÄ 
(
ÄÄ 
player
ÄÄ 
.
ÄÄ 
Position
ÄÄ 
<
ÄÄ  !
$num
ÄÄ" $
)
ÄÄ$ %
{
ÅÅ &
AnimationMovePlayerCardY
ÆÆ (
(
ÆÆ( )
pieces
ÆÆ) /
[
ÆÆ/ 0
player
ÆÆ0 6
.
ÆÆ6 7
Token
ÆÆ7 <
.
ÆÆ< =

PartNumber
ÆÆ= G
]
ÆÆG H
,
ÆÆH I
property
ÆÆJ R
.
ÆÆR S
PosicitionY
ÆÆS ^
)
ÆÆ^ _
;
ÆÆ_ `&
AnimationMovePlayerCardX
ÇÇ (
(
ÇÇ( )
pieces
ÇÇ) /
[
ÇÇ/ 0
player
ÇÇ0 6
.
ÇÇ6 7
Token
ÇÇ7 <
.
ÇÇ< =

PartNumber
ÇÇ= G
]
ÇÇG H
,
ÇÇH I
property
ÇÇJ R
.
ÇÇR S
PosicitionX
ÇÇS ^
)
ÇÇ^ _
;
ÇÇ_ `
AccommodatePart
ÈÈ 
(
ÈÈ  
pieces
ÈÈ  &
[
ÈÈ& '
player
ÈÈ' -
.
ÈÈ- .
Token
ÈÈ. 3
.
ÈÈ3 4

PartNumber
ÈÈ4 >
]
ÈÈ> ?
,
ÈÈ? @
player
ÈÈA G
,
ÈÈG H
property
ÈÈI Q
)
ÈÈQ R
;
ÈÈR S
}
ÉÉ 
else
ÊÊ 
if
ÊÊ 
(
ÊÊ 
player
ÊÊ 
.
ÊÊ 
Position
ÊÊ $
>
ÊÊ% &
$num
ÊÊ' (
&&
ÊÊ) +
player
ÊÊ, 2
.
ÊÊ2 3
Position
ÊÊ3 ;
<
ÊÊ< =
$num
ÊÊ> @
)
ÊÊ@ A
{
ËË &
AnimationMovePlayerCardX
ÌÌ (
(
ÌÌ( )
pieces
ÌÌ) /
[
ÌÌ/ 0
player
ÌÌ0 6
.
ÌÌ6 7
Token
ÌÌ7 <
.
ÌÌ< =

PartNumber
ÌÌ= G
]
ÌÌG H
,
ÌÌH I
$num
ÌÌJ L
)
ÌÌL M
;
ÌÌM N&
AnimationMovePlayerCardY
ÍÍ (
(
ÍÍ( )
pieces
ÍÍ) /
[
ÍÍ/ 0
player
ÍÍ0 6
.
ÍÍ6 7
Token
ÍÍ7 <
.
ÍÍ< =

PartNumber
ÍÍ= G
]
ÍÍG H
,
ÍÍH I
property
ÍÍJ R
.
ÍÍR S
PosicitionY
ÍÍS ^
)
ÍÍ^ _
;
ÍÍ_ `
AccommodatePart
ÎÎ 
(
ÎÎ  
pieces
ÎÎ  &
[
ÎÎ& '
player
ÎÎ' -
.
ÎÎ- .
Token
ÎÎ. 3
.
ÎÎ3 4

PartNumber
ÎÎ4 >
]
ÎÎ> ?
,
ÎÎ? @
player
ÎÎA G
,
ÎÎG H
property
ÎÎI Q
)
ÎÎQ R
;
ÎÎR S
}
ÏÏ 
else
ÐÐ 
if
ÐÐ 
(
ÐÐ 
player
ÐÐ 
.
ÐÐ 
Position
ÐÐ $
>
ÐÐ% &
$num
ÐÐ' )
&&
ÐÐ* ,
player
ÐÐ- 3
.
ÐÐ3 4
Position
ÐÐ4 <
<
ÐÐ= >
$num
ÐÐ? A
)
ÐÐA B
{
ÑÑ &
AnimationMovePlayerCardY
ÒÒ (
(
ÒÒ( )
pieces
ÒÒ) /
[
ÒÒ/ 0
player
ÒÒ0 6
.
ÒÒ6 7
Token
ÒÒ7 <
.
ÒÒ< =

PartNumber
ÒÒ= G
]
ÒÒG H
,
ÒÒH I
-
ÒÒJ K
$num
ÒÒK M
)
ÒÒM N
;
ÒÒN O&
AnimationMovePlayerCardX
ÓÓ (
(
ÓÓ( )
pieces
ÓÓ) /
[
ÓÓ/ 0
player
ÓÓ0 6
.
ÓÓ6 7
Token
ÓÓ7 <
.
ÓÓ< =

PartNumber
ÓÓ= G
]
ÓÓG H
,
ÓÓH I
property
ÓÓJ R
.
ÓÓR S
PosicitionX
ÓÓS ^
)
ÓÓ^ _
;
ÓÓ_ `
AccommodatePart
ÔÔ 
(
ÔÔ  
pieces
ÔÔ  &
[
ÔÔ& '
player
ÔÔ' -
.
ÔÔ- .
Token
ÔÔ. 3
.
ÔÔ3 4

PartNumber
ÔÔ4 >
]
ÔÔ> ?
,
ÔÔ? @
player
ÔÔA G
,
ÔÔG H
property
ÔÔI Q
)
ÔÔQ R
;
ÔÔR S
}
ÕÕ 
else
ÖÖ 
if
ÖÖ 
(
ÖÖ 
player
ÖÖ 
.
ÖÖ 
Position
ÖÖ $
>
ÖÖ% &
$num
ÖÖ' )
&&
ÖÖ* ,
player
ÖÖ- 3
.
ÖÖ3 4
Position
ÖÖ4 <
<
ÖÖ= >
$num
ÖÖ? A
)
ÖÖA B
{
×× &
AnimationMovePlayerCardX
ØØ (
(
ØØ( )
pieces
ØØ) /
[
ØØ/ 0
player
ØØ0 6
.
ØØ6 7
Token
ØØ7 <
.
ØØ< =

PartNumber
ØØ= G
]
ØØG H
,
ØØH I
$num
ØØJ M
)
ØØM N
;
ØØN O&
AnimationMovePlayerCardY
ÙÙ (
(
ÙÙ( )
pieces
ÙÙ) /
[
ÙÙ/ 0
player
ÙÙ0 6
.
ÙÙ6 7
Token
ÙÙ7 <
.
ÙÙ< =

PartNumber
ÙÙ= G
]
ÙÙG H
,
ÙÙH I
property
ÙÙJ R
.
ÙÙR S
PosicitionY
ÙÙS ^
)
ÙÙ^ _
;
ÙÙ_ `
AccommodatePart
ÚÚ 
(
ÚÚ  
pieces
ÚÚ  &
[
ÚÚ& '
player
ÚÚ' -
.
ÚÚ- .
Token
ÚÚ. 3
.
ÚÚ3 4

PartNumber
ÚÚ4 >
]
ÚÚ> ?
,
ÚÚ? @
player
ÚÚA G
,
ÚÚG H
property
ÚÚI Q
)
ÚÚQ R
;
ÚÚR S
}
ÛÛ 
}
ÜÜ 	
public
ÞÞ 
void
ÞÞ 
ShowMyProperties
ÞÞ $
(
ÞÞ$ %
)
ÞÞ% &
{
ßß 	
wpMyPropietiers
àà 
.
àà 
Children
àà $
.
àà$ %
Clear
àà% *
(
àà* +
)
àà+ ,
;
àà, -
ScrollViewer
ââ 
scrollViewer
ââ %
=
ââ& '
new
ââ( +
ScrollViewer
ââ, 8
{
ãã )
VerticalScrollBarVisibility
ää +
=
ää, -!
ScrollBarVisibility
ää. A
.
ääA B
Auto
ääB F
,
ääF G+
HorizontalScrollBarVisibility
åå -
=
åå. /!
ScrollBarVisibility
åå0 C
.
ååC D
Disabled
ååD L
,
ååL M
}
ææ 
;
ææ 

StackPanel
èè !
stackPanelContainer
èè *
=
èè+ ,
new
èè- 0

StackPanel
èè1 ;
(
èè; <
)
èè< =
;
èè= >
foreach
êê 
(
êê 
var
êê 
property
êê !
in
êê" $
Myproperties
êê% 1
)
êê1 2
{
ëë 
Grid
ìì 
grdContainer
ìì !
=
ìì" #
new
ìì$ '
Grid
ìì( ,
{
íí 
Margin
îî 
=
îî 
new
îî  
	Thickness
îî! *
(
îî* +
$num
îî+ ,
,
îî, -
$num
îî. /
,
îî/ 0
$num
îî1 2
,
îî2 3
$num
îî4 5
)
îî5 6
,
îî6 7
}
ïï 
;
ïï 
	Rectangle
ññ 
rectBackground
ññ (
=
ññ) *
new
ññ+ .
	Rectangle
ññ/ 8
{
òò 
Height
óó 
=
óó 
$num
óó 
,
óó  
Width
ôô 
=
ôô 
$num
ôô 
,
ôô  
Fill
õõ 
=
õõ 
new
õõ 
SolidColorBrush
õõ .
(
õõ. /
Color
õõ/ 4
.
õõ4 5
FromRgb
õõ5 <
(
õõ< =
$num
õõ= ?
,
õõ? @
$num
õõA C
,
õõC D
$num
õõE G
)
õõG H
)
õõH I
,
õõI J
}
öö 
;
öö 
grdContainer
÷÷ 
.
÷÷ 
Children
÷÷ %
.
÷÷% &
Add
÷÷& )
(
÷÷) *
rectBackground
÷÷* 8
)
÷÷8 9
;
÷÷9 :
	Rectangle
ùù 
rectStreetColor
ùù )
=
ùù* +
new
ùù, /
	Rectangle
ùù0 9
{
úú 
Height
ûû 
=
ûû 
$num
ûû 
,
ûû  
Width
üü 
=
üü 
$num
üü 
,
üü 
Fill
ýý 
=
ýý 
(
ýý 
Brush
ýý !
)
ýý! "
new
ýý" %
BrushConverter
ýý& 4
(
ýý4 5
)
ýý5 6
.
ýý6 7
ConvertFromString
ýý7 H
(
ýýH I
property
ýýI Q
.
ýýQ R
Color
ýýR W
)
ýýW X
,
ýýX Y
Margin
þþ 
=
þþ 
new
þþ  
	Thickness
þþ! *
(
þþ* +
-
þþ+ ,
$num
þþ, /
,
þþ/ 0
$num
þþ1 2
,
þþ2 3
$num
þþ4 5
,
þþ5 6
$num
þþ7 8
)
þþ8 9
,
þþ9 :
}
ÿÿ 
;
ÿÿ 
grdContainer
 
.
 
Children
 %
.
% &
Add
& )
(
) *
rectStreetColor
* 9
)
9 :
;
: ;
Label
 
lblName
 
=
 
new
  #
Label
$ )
{
 
Content
 
=
 
property
 &
.
& '
Name
' +
,
+ ,

Foreground
 
=
  
new
! $
SolidColorBrush
% 4
(
4 5
Color
5 :
.
: ;
FromRgb
; B
(
B C
$num
C F
,
F G
$num
H K
,
K L
$num
M P
)
P Q
)
Q R
,
R S

FontWeight
 
=
  
FontWeights
! ,
.
, -
Bold
- 1
,
1 2
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ -
,
- .
$num
/ 0
,
0 1
$num
2 3
,
3 4
$num
5 6
)
6 7
,
7 8
}
 
;
 
grdContainer
 
.
 
Children
 %
.
% &
Add
& )
(
) *
lblName
* 1
)
1 2
;
2 3
Label
 
lblCost
 
=
 
new
  #
Label
$ )
{
 
Content
 
=
 
property
 &
.
& '

BuyingCost
' 1
,
1 2

Foreground
 
=
  
new
! $
SolidColorBrush
% 4
(
4 5
Color
5 :
.
: ;
FromRgb
; B
(
B C
$num
C F
,
F G
$num
H K
,
K L
$num
M P
)
P Q
)
Q R
,
R S

FontWeight
 
=
  
FontWeights
! ,
.
, -
Bold
- 1
,
1 2
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ -
,
- .
$num
/ 1
,
1 2
$num
3 4
,
4 5
$num
6 7
)
7 8
,
8 9
}
 
;
 
grdContainer
 
.
 
Children
 %
.
% &
Add
& )
(
) *
lblCost
* 1
)
1 2
;
2 3
Image
 
imgProperty
 !
=
" #
new
$ '
Image
( -
{
 
Height
 
=
 
$num
 
,
  
Width
 
=
 
$num
 
,
 
Source
 
=
 
ImageManager
 )
.
) *
GetSourceImage
* 8
(
8 9
property
9 A
.
A B
ImageSource
B M
)
M N
,
N O
Stretch
 
=
 
Stretch
 %
.
% &
UniformToFill
& 3
,
3 4
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ .
,
. /
$num
0 1
,
1 2
$num
3 4
,
4 5
$num
6 7
)
7 8
,
8 9
}
 
;
 
grdContainer
 
.
 
Children
 %
.
% &
Add
& )
(
) *
imgProperty
* 5
)
5 6
;
6 7
grdContainer
 
.
 (
PreviewMouseLeftButtonDown
 7
+=
8 :
(
; <
sender
< B
,
B C
e
D E
)
E F
=>
G I%
ViewDetailsOfMyProperty
J a
(
a b
sender
b h
,
h i
e
j k
,
k l
property
m u
)
u v
;
v w!
stackPanelContainer
 #
.
# $
Children
$ ,
.
, -
Add
- 0
(
0 1
grdContainer
1 =
)
= >
;
> ?
}
   
scrollViewer
¢¢ 
.
¢¢ 
Content
¢¢  
=
¢¢! "!
stackPanelContainer
¢¢# 6
;
¢¢6 7
wpMyPropietiers
££ 
.
££ 
Children
££ $
.
££$ %
Add
££% (
(
££( )
scrollViewer
££) 5
)
££5 6
;
££6 7
}
¤¤ 	
private
§§ 
void
§§ %
ViewDetailsOfMyProperty
§§ ,
(
§§, -
object
§§- 3
sender
§§4 :
,
§§: ;"
MouseButtonEventArgs
§§< P
e
§§Q R
,
§§R S
Service
§§T [
.
§§[ \
Property
§§\ d

properties
§§e o
)
§§o p
{
¨¨ 	
ShowProperty
©© 
(
©© 

properties
©© #
)
©©# $
;
©©$ %
butCloseEvento
ªª 
.
ªª 

Visibility
ªª %
=
ªª& '

Visibility
ªª( 2
.
ªª2 3
Visible
ªª3 :
;
ªª: ;
}
«« 	
void
­­ 
ShowProperty
­­ 
(
­­ 
Service
­­ !
.
­­! "
Property
­­" *
property
­­+ 3
)
­­3 4
{
®® 	!
grdPropertyPurchase
¯¯ 
.
¯¯  

Visibility
¯¯  *
=
¯¯+ ,

Visibility
¯¯- 7
.
¯¯7 8
Visible
¯¯8 ?
;
¯¯? @
grdPropertySquare
°° 
.
°° 

Visibility
°° (
=
°°) *

Visibility
°°+ 5
.
°°5 6
Visible
°°6 =
;
°°= > 
UpdatePropertyCard
±± 
(
±± 
property
±± '
)
±±' (
;
±±( )
}
²² 	
private
´´ 
void
´´ 
BuyProperty
´´  
(
´´  !
object
´´! '
sender
´´( .
,
´´. /
RoutedEventArgs
´´0 ?
e
´´@ A
)
´´A B
{
µµ 	
if
¶¶ 
(
¶¶ 
player
¶¶ 
.
¶¶ 
Money
¶¶ 
-
¶¶ 
Myproperties
¶¶ +
[
¶¶+ ,
Myproperties
¶¶, 8
.
¶¶8 9
Count
¶¶9 >
-
¶¶? @
$num
¶¶A B
]
¶¶B C
.
¶¶C D

BuyingCost
¶¶D N
>=
¶¶O Q
$num
¶¶R S
)
¶¶S T
{
·· 
if
¹¹ 
(
¹¹ 
cboHotel
¹¹ 
.
¹¹ 
SelectedItem
¹¹ )
!=
¹¹* ,
null
¹¹- 1
&&
¹¹2 4
cboHotel
¹¹5 =
.
¹¹= >
SelectedItem
¹¹> J
.
¹¹J K
ToString
¹¹K S
(
¹¹S T
)
¹¹T U
==
¹¹V X
$str
¹¹Y ]
)
¹¹] ^
{
ºº 
Myproperties
»»  
[
»»  !
Myproperties
»»! -
.
»»- .
Count
»». 3
-
»»4 5
$num
»»6 7
]
»»7 8
.
»»8 9
	Situation
»»9 B
=
»»C D
Service
»»E L
.
»»L M
Property
»»M U
.
»»U V 
Property_Situation
»»V h
.
»»h i
Hotel
»»i n
;
»»n o
player
¼¼ 
.
¼¼ 
Money
¼¼  
-=
¼¼! #
Myproperties
¼¼$ 0
[
¼¼0 1
Myproperties
¼¼1 =
.
¼¼= >
Count
¼¼> C
-
¼¼D E
$num
¼¼F G
]
¼¼G H
.
¼¼H I

BuyingCost
¼¼I S
+
¼¼T U
$num
¼¼V Y
;
¼¼Y Z
}
½½ 
else
¾¾ 
if
¾¾ 
(
¾¾ 
cboNumerHouse
¾¾ &
.
¾¾& '
SelectedItem
¾¾' 3
!=
¾¾4 6
null
¾¾7 ;
)
¾¾; <
{
¿¿ 
Myproperties
ÀÀ  
[
ÀÀ  !
Myproperties
ÀÀ! -
.
ÀÀ- .
Count
ÀÀ. 3
-
ÀÀ4 5
$num
ÀÀ6 7
]
ÀÀ7 8
.
ÀÀ8 9
NumberHouses
ÀÀ9 E
=
ÀÀF G
(
ÀÀH I
int
ÀÀI L
)
ÀÀL M
cboNumerHouse
ÀÀM Z
.
ÀÀZ [
SelectedItem
ÀÀ[ g
;
ÀÀg h
Myproperties
ÁÁ  
[
ÁÁ  !
Myproperties
ÁÁ! -
.
ÁÁ- .
Count
ÁÁ. 3
-
ÁÁ4 5
$num
ÁÁ6 7
]
ÁÁ7 8
.
ÁÁ8 9
	Situation
ÁÁ9 B
=
ÁÁC D
Service
ÁÁE L
.
ÁÁL M
Property
ÁÁM U
.
ÁÁU V 
Property_Situation
ÁÁV h
.
ÁÁh i
House
ÁÁi n
;
ÁÁn o
player
ÂÂ 
.
ÂÂ 
Money
ÂÂ  
-=
ÂÂ! #
Myproperties
ÂÂ$ 0
[
ÂÂ0 1
Myproperties
ÂÂ1 =
.
ÂÂ= >
Count
ÂÂ> C
-
ÂÂD E
$num
ÂÂF G
]
ÂÂG H
.
ÂÂH I

BuyingCost
ÂÂI S
+
ÂÂT U
(
ÂÂV W
(
ÂÂW X
int
ÂÂX [
)
ÂÂ[ \
cboNumerHouse
ÂÂ\ i
.
ÂÂi j
SelectedItem
ÂÂj v
*
ÂÂw x
$num
ÂÂy {
)
ÂÂ{ |
;
ÂÂ| }
}
ÃÃ 
else
ÄÄ 
{
ÅÅ 
Myproperties
ÆÆ  
[
ÆÆ  !
Myproperties
ÆÆ! -
.
ÆÆ- .
Count
ÆÆ. 3
-
ÆÆ4 5
$num
ÆÆ6 7
]
ÆÆ7 8
.
ÆÆ8 9
	Situation
ÆÆ9 B
=
ÆÆC D
Service
ÆÆE L
.
ÆÆL M
Property
ÆÆM U
.
ÆÆU V 
Property_Situation
ÆÆV h
.
ÆÆh i
Bought
ÆÆi o
;
ÆÆo p
player
ÇÇ 
.
ÇÇ 
Money
ÇÇ  
-=
ÇÇ! #
Myproperties
ÇÇ$ 0
[
ÇÇ0 1
Myproperties
ÇÇ1 =
.
ÇÇ= >
Count
ÇÇ> C
-
ÇÇD E
$num
ÇÇF G
]
ÇÇG H
.
ÇÇH I

BuyingCost
ÇÇI S
;
ÇÇS T
}
ÈÈ 
managerClient
ÉÉ 
.
ÉÉ 
PurchaseProperty
ÉÉ .
(
ÉÉ. /
Myproperties
ÉÉ/ ;
[
ÉÉ; <
Myproperties
ÉÉ< H
.
ÉÉH I
Count
ÉÉI N
-
ÉÉO P
$num
ÉÉQ R
]
ÉÉR S
,
ÉÉS T
player
ÉÉU [
,
ÉÉ[ \
game
ÉÉ] a
.
ÉÉa b
IdGame
ÉÉb h
)
ÉÉh i
;
ÉÉi j
lblPlayerMoney
ÊÊ 
.
ÊÊ 
Content
ÊÊ &
=
ÊÊ' (
$"
ÊÊ) +
$str
ÊÊ+ .
{
ÊÊ. /
player
ÊÊ/ 5
.
ÊÊ5 6
Money
ÊÊ6 ;
}
ÊÊ; <
$str
ÊÊ< @
"
ÊÊ@ A
;
ÊÊA B
ShowMyProperties
ËË  
(
ËË  !
)
ËË! "
;
ËË" ##
ClosePropertyPurchase
ÌÌ %
(
ÌÌ% &
)
ÌÌ& '
;
ÌÌ' (
}
ÍÍ 
else
ÎÎ 
{
ÏÏ 

MessageBox
ÐÐ 
.
ÐÐ 
Show
ÐÐ 
(
ÐÐ  
$str
ÐÐ  /
,
ÐÐ/ 0
$str
ÐÐ1 >
,
ÐÐ> ?
MessageBoxButton
ÐÐ@ P
.
ÐÐP Q
OK
ÐÐQ S
,
ÐÐS T
MessageBoxImage
ÐÐU d
.
ÐÐd e
Information
ÐÐe p
)
ÐÐp q
;
ÐÐq r
}
ÑÑ 
}
ÓÓ 	
void
ÕÕ #
ClosePropertyPurchase
ÕÕ "
(
ÕÕ" #
)
ÕÕ# $
{
ÖÖ 	!
grdPropertyPurchase
×× 
.
××  

Visibility
××  *
=
××+ ,

Visibility
××- 7
.
××7 8
	Collapsed
××8 A
;
××A B
grdPropertySquare
ØØ 
.
ØØ 

Visibility
ØØ (
=
ØØ) *

Visibility
ØØ+ 5
.
ØØ5 6
	Collapsed
ØØ6 ?
;
ØØ? @
grdPrisonSquare
ÙÙ 
.
ÙÙ 

Visibility
ÙÙ &
=
ÙÙ' (

Visibility
ÙÙ) 3
.
ÙÙ3 4
	Collapsed
ÙÙ4 =
;
ÙÙ= >
grdEventSquare
ÚÚ 
.
ÚÚ 

Visibility
ÚÚ %
=
ÚÚ& '

Visibility
ÚÚ( 2
.
ÚÚ2 3
	Collapsed
ÚÚ3 <
;
ÚÚ< =
grdAddHouse
ÛÛ 
.
ÛÛ 

Visibility
ÛÛ "
=
ÛÛ# $

Visibility
ÛÛ% /
.
ÛÛ/ 0
	Collapsed
ÛÛ0 9
;
ÛÛ9 :
grdAddHotel
ÜÜ 
.
ÜÜ 

Visibility
ÜÜ "
=
ÜÜ# $

Visibility
ÜÜ% /
.
ÜÜ/ 0
	Collapsed
ÜÜ0 9
;
ÜÜ9 :
butCloseEvento
ÝÝ 
.
ÝÝ 

Visibility
ÝÝ %
=
ÝÝ& '

Visibility
ÝÝ( 2
.
ÝÝ2 3
	Collapsed
ÝÝ3 <
;
ÝÝ< =
butRollingDice
ÞÞ 
.
ÞÞ 
	IsEnabled
ÞÞ $
=
ÞÞ% &
true
ÞÞ' +
;
ÞÞ+ ,
}
ßß 	
private
áá 
void
áá *
ShowPropertyPurchaseContract
áá 1
(
áá1 2
object
áá2 8
sender
áá9 ?
,
áá? @
RoutedEventArgs
ááA P
e
ááQ R
)
ááR S
{
ââ 	
grdMenu
ãã 
.
ãã 

Visibility
ãã 
=
ãã  

Visibility
ãã! +
.
ãã+ ,
	Collapsed
ãã, 5
;
ãã5 6
grdAddHouse
ää 
.
ää 

Visibility
ää "
=
ää# $

Visibility
ää% /
.
ää/ 0
Visible
ää0 7
;
ää7 8
if
åå 
(
åå 
Myproperties
åå 
[
åå 
Myproperties
åå )
.
åå) *
Count
åå* /
-
åå0 1
$num
åå2 3
]
åå3 4
.
åå4 5
NumberHouses
åå5 A
==
ååB D
$num
ååE F
)
ååF G
{
ææ 
grdAddHotel
çç 
.
çç 

Visibility
çç &
=
çç' (

Visibility
çç) 3
.
çç3 4
Visible
çç4 ;
;
çç; <
}
èè 
}
éé 	
private
ëë 
void
ëë '
DeclineToPurchaseProperty
ëë .
(
ëë. /
object
ëë/ 5
sender
ëë6 <
,
ëë< =
RoutedEventArgs
ëë> M
e
ëëN O
)
ëëO P
{
ìì 	#
ClosePropertyPurchase
íí !
(
íí! "
)
íí" #
;
íí# $
managerClient
îî 
.
îî 
StartAuction
îî &
(
îî& '
game
îî' +
.
îî+ ,
IdGame
îî, 2
,
îî2 3
Myproperties
îî4 @
[
îî@ A
Myproperties
îîA M
.
îîM N
Count
îîN S
-
îîT U
$num
îîV W
]
îîW X
)
îîX Y
;
îîY Z
}
ïï 	
private
ññ 
void
ññ  
AddHotelToProperty
ññ '
(
ññ' (
object
ññ( .
sender
ññ/ 5
,
ññ5 6'
SelectionChangedEventArgs
ññ7 P
e
ññQ R
)
ññR S
{
òò 	
if
óó 
(
óó 
cboHotel
óó 
.
óó 
SelectedItem
óó %
!=
óó& (
null
óó) -
&&
óó. 0
cboHotel
óó1 9
.
óó9 :
SelectedItem
óó: F
.
óóF G
ToString
óóG O
(
óóO P
)
óóP Q
==
óóR T
$str
óóU Y
)
óóY Z
{
ôô 
cboNumerHouse
õõ 
.
õõ 
	IsEnabled
õõ '
=
õõ( )
false
õõ* /
;
õõ/ 0
cboNumerHouse
öö 
.
öö 
SelectedItem
öö *
=
öö+ ,
null
öö- 1
;
öö1 2
butBuyProperty
÷÷ 
.
÷÷ 

Visibility
÷÷ )
=
÷÷* +

Visibility
÷÷, 6
.
÷÷6 7
Visible
÷÷7 >
;
÷÷> ?
}
øø 
}
ùù 	
void
ûû '
IGameLogicManagerCallback
ûû &
.
ûû& '
ShowCard
ûû' /
(
ûû/ 0
Service
ûû0 7
.
ûû7 8
Property
ûû8 @
property
ûûA I
)
ûûI J
{
üü 	!
grdPropertyPurchase
ýý 
.
ýý  

Visibility
ýý  *
=
ýý+ ,

Visibility
ýý- 7
.
ýý7 8
Visible
ýý8 ?
;
ýý? @
if
þþ 
(
þþ 
property
þþ 
.
þþ 
Name
þþ 
==
þþ  
$str
þþ! )
)
þþ) *
{
ÿÿ 
grdPrisonSquare
 
.
  

Visibility
  *
=
+ ,

Visibility
- 7
.
7 8
Visible
8 ?
;
? @
butCloseEvento
 
.
 

Visibility
 )
=
* +

Visibility
, 6
.
6 7
Visible
7 >
;
> ?
player
 
.
 
Jail
 
=
 
true
 "
;
" #
}
 
else
 
if
 
(
 
property
 
.
 
Name
 "
==
# %
$str
& .
)
. /
{
 
grdEventSquare
 
.
 

Visibility
 )
=
* +

Visibility
, 6
.
6 7
Visible
7 >
;
> ?
butCloseEvento
 
.
 

Visibility
 )
=
* +

Visibility
, 6
.
6 7
Visible
7 >
;
> ?
managerClient
 
.
 
GetActionCard
 +
(
+ ,
game
, 0
.
0 1
IdGame
1 7
)
7 8
;
8 9
}
 
else
 
{
 
grdMenu
 
.
 

Visibility
 "
=
# $

Visibility
% /
.
/ 0
Visible
0 7
;
7 8
grdPropertySquare
 !
.
! "

Visibility
" ,
=
- .

Visibility
/ 9
.
9 :
Visible
: A
;
A B 
UpdatePropertyCard
 "
(
" #
property
# +
)
+ ,
;
, -
Myproperties
 
.
 
Add
  
(
  !
property
! )
)
) *
;
* +
}
 
}
 	
private
 
void
 "
ButCloseEvento_Click
 )
(
) *
object
* 0
sender
1 7
,
7 8
RoutedEventArgs
9 H
e
I J
)
J K
{
 	#
ClosePropertyPurchase
 !
(
! "
)
" #
;
# $
}
 	
public
 
void
 
OpenAuctionWindow
 %
(
% &
Service
& -
.
- .
Property
. 6
property
7 ?
)
? @
{
 	
btnBuy
 
.
 

Visibility
 
=
 

Visibility
  *
.
* +
	Collapsed
+ 4
;
4 5

btnDecline
 
.
 

Visibility
 !
=
" #

Visibility
$ .
.
. /
	Collapsed
/ 8
;
8 9!
grdPropertyPurchase
 
.
  

Visibility
  *
=
+ ,

Visibility
- 7
.
7 8
Visible
8 ?
;
? @
grdPropertySquare
 
.
 

Visibility
 (
=
) *

Visibility
+ 5
.
5 6
Visible
6 =
;
= >
	BidWindow
 
.
 

Visibility
  
=
! "

Visibility
# -
.
- .
Visible
. 5
;
5 6
LblBid
 
.
 

Visibility
 
=
 

Visibility
  *
.
* +
	Collapsed
+ 4
;
4 5
txtBid
   
.
   

Visibility
   
=
   

Visibility
    *
.
  * +
	Collapsed
  + 4
;
  4 5
btnBid
¡¡ 
.
¡¡ 

Visibility
¡¡ 
=
¡¡ 

Visibility
¡¡  *
.
¡¡* +
	Collapsed
¡¡+ 4
;
¡¡4 5
	btnEndBid
¢¢ 
.
¢¢ 

Visibility
¢¢  
=
¢¢! "

Visibility
¢¢# -
.
¢¢- .
	Collapsed
¢¢. 7
;
¢¢7 8
if
¤¤ 
(
¤¤ 
game
¤¤ 
.
¤¤ 
Players
¤¤ 
.
¤¤ 
Peek
¤¤ !
(
¤¤! "
)
¤¤" #
.
¤¤# $
IdPlayer
¤¤$ ,
==
¤¤- /
player
¤¤0 6
.
¤¤6 7
IdPlayer
¤¤7 ?
)
¤¤? @
{
¥¥ 
	btnEndBid
¦¦ 
.
¦¦ 

Visibility
¦¦ $
=
¦¦% &

Visibility
¦¦' 1
.
¦¦1 2
Visible
¦¦2 9
;
¦¦9 :
}
§§ 
else
¨¨ 
{
©© 
LblBid
ªª 
.
ªª 

Visibility
ªª !
=
ªª" #

Visibility
ªª$ .
.
ªª. /
Visible
ªª/ 6
;
ªª6 7
txtBid
«« 
.
«« 

Visibility
«« !
=
««" #

Visibility
««$ .
.
««. /
Visible
««/ 6
;
««6 7
btnBid
¬¬ 
.
¬¬ 

Visibility
¬¬ !
=
¬¬" #

Visibility
¬¬$ .
.
¬¬. /
Visible
¬¬/ 6
;
¬¬6 7
}
­­  
UpdatePropertyCard
¯¯ 
(
¯¯ 
property
¯¯ '
)
¯¯' (
;
¯¯( )
}
°° 	
private
²² 
void
²² 
EndBid
²² 
(
²² 
object
²² "
sender
²²# )
,
²²) *
RoutedEventArgs
²²+ :
e
²²; <
)
²²< =
{
³³ 	
managerClient
´´ 
.
´´ 
StopAuction
´´ %
(
´´% &
this
´´& *
.
´´* +
game
´´+ /
.
´´/ 0
IdGame
´´0 6
,
´´6 7
this
´´8 <
.
´´< =
LastBid
´´= D
.
´´D E
IdPlayer
´´E M
,
´´M N
this
´´O S
.
´´S T
LastBid
´´T [
.
´´[ \
BidMoney
´´\ d
,
´´d e
this
´´f j
.
´´j k
Myproperties
´´k w
[
´´w x
this
´´x |
.
´´| }
Myproperties´´} 
.´´ 
Count´´ 
-´´ 
$num´´ 
]´´ 
)´´ 
;´´ 
}
µµ 	
private
·· 
void
·· 
MakeBid
·· 
(
·· 
object
·· #
sender
··$ *
,
··* +
RoutedEventArgs
··, ;
e
··< =
)
··= >
{
¸¸ 	
btnBid
¹¹ 
.
¹¹ 
	IsEnabled
¹¹ 
=
¹¹ 
false
¹¹ $
;
¹¹$ %
int
ºº 
Bid
ºº 
=
ºº 
int
ºº 
.
ºº 
Parse
ºº 
(
ºº  
txtBid
ºº  &
.
ºº& '
Text
ºº' +
)
ºº+ ,
;
ºº, -
if
»» 
(
»» 
Bid
»» 
>
»» 
LastBid
»» 
.
»» 
BidMoney
»» &
&&
»»' )
Bid
»»* -
<=
»». 0
player
»»1 7
.
»»7 8
Money
»»8 =
)
»»= >
{
¼¼ 
managerClient
½½ 
.
½½ 
MakeBid
½½ %
(
½½% &
game
½½& *
.
½½* +
IdGame
½½+ 1
,
½½1 2
player
½½3 9
.
½½9 :
IdPlayer
½½: B
,
½½B C
Bid
½½D G
)
½½G H
;
½½H I
_
¾¾ 
=
¾¾ 
ColdDownBid
¾¾ 
(
¾¾  
)
¾¾  !
;
¾¾! "
}
¿¿ 
}
ÀÀ 	
public
ÂÂ 
void
ÂÂ 

UpdateBids
ÂÂ 
(
ÂÂ 
int
ÂÂ "
IdPlayer
ÂÂ# +
,
ÂÂ+ ,
int
ÂÂ- 0
Bid
ÂÂ1 4
)
ÂÂ4 5
{
ÃÃ 	
Label
ÄÄ 
LblBidObject
ÄÄ 
=
ÄÄ  
new
ÄÄ! $
Label
ÄÄ% *
(
ÄÄ* +
)
ÄÄ+ ,
;
ÄÄ, -
LblBidObject
ÅÅ 
.
ÅÅ 
Content
ÅÅ  
=
ÅÅ! "
$"
ÅÅ# %
$str
ÅÅ% (
{
ÅÅ( )
Bid
ÅÅ) ,
}
ÅÅ, -
$str
ÅÅ- 1
"
ÅÅ1 2
;
ÅÅ2 3
Bids
ÆÆ 
.
ÆÆ 
Children
ÆÆ 
.
ÆÆ 
Insert
ÆÆ  
(
ÆÆ  !
$num
ÆÆ! "
,
ÆÆ" #
LblBidObject
ÆÆ$ 0
)
ÆÆ0 1
;
ÆÆ1 2
this
ÇÇ 
.
ÇÇ 
LastBid
ÇÇ 
.
ÇÇ 
BidMoney
ÇÇ !
=
ÇÇ" #
Bid
ÇÇ$ '
;
ÇÇ' (
if
ÉÉ 
(
ÉÉ 
game
ÉÉ 
.
ÉÉ 
Players
ÉÉ 
.
ÉÉ 
Peek
ÉÉ !
(
ÉÉ! "
)
ÉÉ" #
.
ÉÉ# $
IdPlayer
ÉÉ$ ,
==
ÉÉ- /
player
ÉÉ0 6
.
ÉÉ6 7
IdPlayer
ÉÉ7 ?
)
ÉÉ? @
{
ÊÊ 
this
ËË 
.
ËË 
LastBid
ËË 
.
ËË 
IdPlayer
ËË %
=
ËË& '
IdPlayer
ËË( 0
;
ËË0 1
}
ÌÌ 
}
ÍÍ 	
async
ÏÏ 
Task
ÏÏ 
ColdDownBid
ÏÏ 
(
ÏÏ 
)
ÏÏ  
{
ÐÐ 	
await
ÑÑ 
Task
ÑÑ 
.
ÑÑ 
Delay
ÑÑ 
(
ÑÑ 
$num
ÑÑ !
)
ÑÑ! "
;
ÑÑ" #
await
ÒÒ 
Console
ÒÒ 
.
ÒÒ 
Out
ÒÒ 
.
ÒÒ 
WriteLineAsync
ÒÒ ,
(
ÒÒ, -
$str
ÒÒ- A
)
ÒÒA B
;
ÒÒB C
btnBid
ÓÓ 
.
ÓÓ 
	IsEnabled
ÓÓ 
=
ÓÓ 
true
ÓÓ #
;
ÓÓ# $
}
ÔÔ 	
public
ÖÖ 
void
ÖÖ 

EndAuction
ÖÖ 
(
ÖÖ 
Service
ÖÖ &
.
ÖÖ& '
Property
ÖÖ' /
property
ÖÖ0 8
,
ÖÖ8 9
int
ÖÖ: =
winner
ÖÖ> D
,
ÖÖD E
int
ÖÖF I
	winnerBid
ÖÖJ S
)
ÖÖS T
{
×× 	!
grdPropertyPurchase
ØØ 
.
ØØ  

Visibility
ØØ  *
=
ØØ+ ,

Visibility
ØØ- 7
.
ØØ7 8
	Collapsed
ØØ8 A
;
ØØA B
grdPropertySquare
ÙÙ 
.
ÙÙ 

Visibility
ÙÙ (
=
ÙÙ) *

Visibility
ÙÙ+ 5
.
ÙÙ5 6
	Collapsed
ÙÙ6 ?
;
ÙÙ? @
this
ÚÚ 
.
ÚÚ 
	BidWindow
ÚÚ 
.
ÚÚ 

Visibility
ÚÚ %
=
ÚÚ& '

Visibility
ÚÚ( 2
.
ÚÚ2 3
	Collapsed
ÚÚ3 <
;
ÚÚ< =
if
ÛÛ 
(
ÛÛ 
game
ÛÛ 
.
ÛÛ 
Players
ÛÛ 
.
ÛÛ 
Peek
ÛÛ !
(
ÛÛ! "
)
ÛÛ" #
.
ÛÛ# $
IdPlayer
ÛÛ$ ,
==
ÛÛ- /
player
ÛÛ0 6
.
ÛÛ6 7
IdPlayer
ÛÛ7 ?
)
ÛÛ? @
{
ÜÜ 
this
ÝÝ 
.
ÝÝ 
Myproperties
ÝÝ !
.
ÝÝ! "
RemoveAt
ÝÝ" *
(
ÝÝ* +
this
ÝÝ+ /
.
ÝÝ/ 0
Myproperties
ÝÝ0 <
.
ÝÝ< =
Count
ÝÝ= B
-
ÝÝC D
$num
ÝÝE F
)
ÝÝF G
;
ÝÝG H
}
ÞÞ 
else
ßß 
if
ßß 
(
ßß 
player
ßß 
.
ßß 
IdPlayer
ßß $
==
ßß% '
winner
ßß( .
)
ßß. /
{
àà 
this
áá 
.
áá 
Myproperties
áá !
.
áá! "
Add
áá" %
(
áá% &
property
áá& .
)
áá. /
;
áá/ 0
this
ââ 
.
ââ 
Myproperties
ââ !
[
ââ! "
Myproperties
ââ" .
.
ââ. /
Count
ââ/ 4
-
ââ5 6
$num
ââ7 8
]
ââ8 9
.
ââ9 :

BuyingCost
ââ: D
=
ââE F
	winnerBid
ââG P
;
ââP Q
this
ãã 
.
ãã 
player
ãã 
.
ãã 
Money
ãã !
-=
ãã" $
	winnerBid
ãã% .
;
ãã. /
managerClient
ää 
.
ää 
PurchaseProperty
ää .
(
ää. /
Myproperties
ää/ ;
[
ää; <
Myproperties
ää< H
.
ääH I
Count
ääI N
-
ääO P
$num
ääQ R
]
ääR S
,
ääS T
player
ääU [
,
ää[ \
game
ää] a
.
ääa b
IdGame
ääb h
)
ääh i
;
ääi j
lblPlayerMoney
åå 
.
åå 
Content
åå &
=
åå' (
$"
åå) +
$str
åå+ .
{
åå. /
player
åå/ 5
.
åå5 6
Money
åå6 ;
}
åå; <
$str
åå< @
"
åå@ A
;
ååA B
ShowMyProperties
ææ  
(
ææ  !
)
ææ! "
;
ææ" #
}
çç 
}
èè 	
public
êê 
void
êê 
UpdateTurns
êê 
(
êê  
Queue
êê  %
<
êê% &
Service
êê& -
.
êê- .
Player
êê. 4
>
êê4 5
turns
êê6 ;
)
êê; <
{
ëë 	
game
ìì 
.
ìì 
Players
ìì 
=
ìì 
turns
ìì  
;
ìì  !
UpdateTurnVisual
íí 
(
íí 
)
íí 
;
íí 
if
îî 
(
îî 
game
îî 
.
îî 
Players
îî 
.
îî 
Peek
îî !
(
îî! "
)
îî" #
.
îî# $
IdPlayer
îî$ ,
==
îî- /
player
îî0 6
.
îî6 7
IdPlayer
îî7 ?
)
îî? @
{
ïï 
if
ðð 
(
ðð 
!
ðð 
player
ðð 
.
ðð 
Jail
ðð  
)
ðð  !
{
ññ 
this
òò 
.
òò 
butRollingDice
òò '
.
òò' (
	IsEnabled
òò( 1
=
òò2 3
true
òò4 8
;
òò8 9
}
óó 
else
ôô 
{
õõ 
player
öö 
.
öö 
Jail
öö 
=
öö  !
false
öö" '
;
öö' (
managerClient
÷÷ !
.
÷÷! "

UpdateQueu
÷÷" ,
(
÷÷, -
game
÷÷- 1
.
÷÷1 2
IdGame
÷÷2 8
)
÷÷8 9
;
÷÷9 :
}
øø 
}
ùù 
}
úú 	
public
üü 
void
üü 
LoadFriends
üü 
(
üü  
Queue
üü  %
<
üü% &
Service
üü& -
.
üü- .
Player
üü. 4
>
üü4 5
friends
üü6 =
)
üü= >
{
ýý 	
PlayersInGame
þþ 
.
þþ 
Children
þþ "
.
þþ" #
Clear
þþ# (
(
þþ( )
)
þþ) *
;
þþ* +
ScrollViewer
 
scrollViewer
 %
=
& '
new
( +
ScrollViewer
, 8
{
 )
VerticalScrollBarVisibility
 +
=
, -!
ScrollBarVisibility
. A
.
A B
Auto
B F
,
F G+
HorizontalScrollBarVisibility
 -
=
. /!
ScrollBarVisibility
0 C
.
C D
Disabled
D L
,
L M
}
 
;
 

StackPanel
 !
stackPanelContainer
 *
=
+ ,
new
- 0

StackPanel
1 ;
(
; <
)
< =
;
= >
foreach
 
(
 
var
 
friend
 
in
  "
friends
# *
)
* +
{
 
Grid
 
grdContainer
 !
=
" #
new
$ '
Grid
( ,
{
 
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ -
,
- .
$num
/ 0
,
0 1
$num
2 3
,
3 4
$num
5 6
)
6 7
,
7 8
}
 
;
 
	Rectangle
 
rectBackground
 (
=
) *
new
+ .
	Rectangle
/ 8
{
 
Height
 
=
 
$num
  
,
  !
Width
 
=
 
$num
 
,
  
RadiusX
 
=
 
$num
  
,
  !
RadiusY
 
=
 
$num
  
,
  !
Fill
 
=
 
new
 
SolidColorBrush
 .
(
. /
(
/ 0
Color
0 5
)
5 6
ColorConverter
6 D
.
D E
ConvertFromString
E V
(
V W
$str
W b
)
b c
)
c d
,
d e
Stroke
 
=
 
new
  
SolidColorBrush
! 0
(
0 1
(
1 2
Color
2 7
)
7 8
ColorConverter
8 F
.
F G
ConvertFromString
G X
(
X Y
$str
Y d
)
d e
)
e f
,
f g
}
 
;
 
grdContainer
 
.
 
Children
 %
.
% &
Add
& )
(
) *
rectBackground
* 8
)
8 9
;
9 :
Ellipse
 
ellipse
 
=
  !
new
" %
Ellipse
& -
{
 
Height
 
=
 
$num
 
,
  
Width
 
=
 
$num
 
,
 
Fill
 
=
 
new
 
SolidColorBrush
 .
(
. /
(
/ 0
Color
0 5
)
5 6
ColorConverter
6 D
.
D E
ConvertFromString
E V
(
V W
$str
W b
)
b c
)
c d
,
d e
Stroke
 
=
 
new
  
SolidColorBrush
! 0
(
0 1
(
1 2
Color
2 7
)
7 8
ColorConverter
8 F
.
F G
ConvertFromString
G X
(
X Y
$str
Y d
)
d e
)
e f
,
f g
Margin
   
=
   
new
    
	Thickness
  ! *
(
  * +
-
  + ,
$num
  , /
,
  / 0
$num
  1 3
,
  3 4
$num
  5 6
,
  6 7
$num
  8 :
)
  : ;
,
  ; <
}
¡¡ 
;
¡¡ 
grdContainer
¢¢ 
.
¢¢ 
Children
¢¢ %
.
¢¢% &
Add
¢¢& )
(
¢¢) *
ellipse
¢¢* 1
)
¢¢1 2
;
¢¢2 3
Label
¤¤ 
lblName
¤¤ 
=
¤¤ 
new
¤¤  #
Label
¤¤$ )
{
¥¥ 
Content
¦¦ 
=
¦¦ 
friend
¦¦ $
.
¦¦$ %
Name
¦¦% )
,
¦¦) *

Foreground
§§ 
=
§§  
new
§§! $
SolidColorBrush
§§% 4
(
§§4 5
(
§§5 6
Color
§§6 ;
)
§§; <
ColorConverter
§§< J
.
§§J K
ConvertFromString
§§K \
(
§§\ ]
$str
§§] h
)
§§h i
)
§§i j
,
§§j k

FontWeight
¨¨ 
=
¨¨  
FontWeights
¨¨! ,
.
¨¨, -
Bold
¨¨- 1
,
¨¨1 2

FontFamily
©© 
=
©©  
new
©©! $

FontFamily
©©% /
(
©©/ 0
$str
©©0 =
)
©©= >
,
©©> ?
FontSize
ªª 
=
ªª 
$num
ªª !
,
ªª! "
Margin
«« 
=
«« 
new
««  
	Thickness
««! *
(
««* +
$num
««+ .
,
««. /
$num
««0 2
,
««2 3
$num
««4 5
,
««5 6
$num
««7 8
)
««8 9
,
««9 :
}
¬¬ 
;
¬¬ 
grdContainer
­­ 
.
­­ 
Children
­­ %
.
­­% &
Add
­­& )
(
­­) *
lblName
­­* 1
)
­­1 2
;
­­2 3
Label
¯¯ 
lblCost
¯¯ 
=
¯¯ 
new
¯¯  #
Label
¯¯$ )
{
°° 
Content
±± 
=
±± 
$str
±± "
+
±±# $
friend
±±% +
.
±±+ ,
Money
±±, 1
.
±±1 2
ToString
±±2 :
(
±±: ;
)
±±; <
+
±±= >
$str
±±? D
,
±±D E

Foreground
²² 
=
²²  
new
²²! $
SolidColorBrush
²²% 4
(
²²4 5
(
²²5 6
Color
²²6 ;
)
²²; <
ColorConverter
²²< J
.
²²J K
ConvertFromString
²²K \
(
²²\ ]
$str
²²] h
)
²²h i
)
²²i j
,
²²j k

FontWeight
³³ 
=
³³  
FontWeights
³³! ,
.
³³, -
Bold
³³- 1
,
³³1 2

FontFamily
´´ 
=
´´  
new
´´! $

FontFamily
´´% /
(
´´/ 0
$str
´´0 F
)
´´F G
,
´´G H
FontSize
µµ 
=
µµ 
$num
µµ !
,
µµ! "
Margin
¶¶ 
=
¶¶ 
new
¶¶  
	Thickness
¶¶! *
(
¶¶* +
$num
¶¶+ .
,
¶¶. /
$num
¶¶0 2
,
¶¶2 3
$num
¶¶4 5
,
¶¶5 6
$num
¶¶7 8
)
¶¶8 9
,
¶¶9 :
}
·· 
;
·· 
grdContainer
¸¸ 
.
¸¸ 
Children
¸¸ %
.
¸¸% &
Add
¸¸& )
(
¸¸) *
lblCost
¸¸* 1
)
¸¸1 2
;
¸¸2 3
Image
ºº 
imgProperty
ºº !
=
ºº" #
new
ºº$ '
Image
ºº( -
{
»» 
Height
¼¼ 
=
¼¼ 
$num
¼¼ 
,
¼¼  
Width
½½ 
=
½½ 
$num
½½ 
,
½½ 
Source
¾¾ 
=
¾¾ 
ImageManager
¾¾ )
.
¾¾) *
GetSourceImage
¾¾* 8
(
¾¾8 9
friend
¾¾9 ?
.
¾¾? @
Token
¾¾@ E
.
¾¾E F
ImagenSource
¾¾F R
)
¾¾R S
,
¾¾S T
Stretch
¿¿ 
=
¿¿ 
Stretch
¿¿ %
.
¿¿% &
Fill
¿¿& *
,
¿¿* +
Margin
ÀÀ 
=
ÀÀ 
new
ÀÀ  
	Thickness
ÀÀ! *
(
ÀÀ* +
-
ÀÀ+ ,
$num
ÀÀ, /
,
ÀÀ/ 0
$num
ÀÀ1 3
,
ÀÀ3 4
$num
ÀÀ5 6
,
ÀÀ6 7
$num
ÀÀ8 :
)
ÀÀ: ;
,
ÀÀ; <
}
ÁÁ 
;
ÁÁ 
grdContainer
ÃÃ 
.
ÃÃ 
Children
ÃÃ %
.
ÃÃ% &
Add
ÃÃ& )
(
ÃÃ) *
imgProperty
ÃÃ* 5
)
ÃÃ5 6
;
ÃÃ6 7!
stackPanelContainer
ÄÄ #
.
ÄÄ# $
Children
ÄÄ$ ,
.
ÄÄ, -
Add
ÄÄ- 0
(
ÄÄ0 1
grdContainer
ÄÄ1 =
)
ÄÄ= >
;
ÄÄ> ?
}
ÅÅ 
scrollViewer
ÇÇ 
.
ÇÇ 
Content
ÇÇ  
=
ÇÇ! "!
stackPanelContainer
ÇÇ# 6
;
ÇÇ6 7
PlayersInGame
ÈÈ 
.
ÈÈ 
Children
ÈÈ "
.
ÈÈ" #
Add
ÈÈ# &
(
ÈÈ& '
scrollViewer
ÈÈ' 3
)
ÈÈ3 4
;
ÈÈ4 5
}
ÉÉ 	
public
ËË 
void
ËË 
	ShowEvent
ËË 
(
ËË 
int
ËË !
action
ËË" (
)
ËË( )
{
ÌÌ 	
Console
ÍÍ 
.
ÍÍ 
	WriteLine
ÍÍ 
(
ÍÍ 
action
ÍÍ $
)
ÍÍ$ %
;
ÍÍ% &
}
ÎÎ 	
public
ÐÐ 
void
ÐÐ 
GoToJail
ÐÐ 
(
ÐÐ 
)
ÐÐ 
{
ÑÑ 	
int
ÒÒ 
[
ÒÒ 
]
ÒÒ 
targetPositions
ÒÒ !
=
ÒÒ" #
{
ÒÒ$ %
$num
ÒÒ& (
,
ÒÒ( )
$num
ÒÒ* ,
,
ÒÒ, -
$num
ÒÒ. 0
}
ÒÒ1 2
;
ÒÒ2 3
int
ÓÓ 
closestPosition
ÓÓ 
=
ÓÓ  !
targetPositions
ÓÓ" 1
[
ÓÓ1 2
$num
ÓÓ2 3
]
ÓÓ3 4
;
ÓÓ4 5
foreach
ÔÔ 
(
ÔÔ 
int
ÔÔ 
targetPosition
ÔÔ '
in
ÔÔ( *
targetPositions
ÔÔ+ :
)
ÔÔ: ;
{
ÕÕ 
if
ÖÖ 
(
ÖÖ 
Math
ÖÖ 
.
ÖÖ 
Abs
ÖÖ 
(
ÖÖ 
targetPosition
ÖÖ +
-
ÖÖ, -
player
ÖÖ. 4
.
ÖÖ4 5
Position
ÖÖ5 =
)
ÖÖ= >
<
ÖÖ? @
Math
ÖÖA E
.
ÖÖE F
Abs
ÖÖF I
(
ÖÖI J
closestPosition
ÖÖJ Y
-
ÖÖZ [
player
ÖÖ\ b
.
ÖÖb c
Position
ÖÖc k
)
ÖÖk l
)
ÖÖl m
{
×× 
closestPosition
ØØ #
=
ØØ$ %
targetPosition
ØØ& 4
;
ØØ4 5
}
ÙÙ 
}
ÚÚ 
managerClient
ÛÛ 
.
ÛÛ 

MovePlayer
ÛÛ $
(
ÛÛ$ %
game
ÛÛ% )
.
ÛÛ) *
IdGame
ÛÛ* 0
,
ÛÛ0 1
(
ÛÛ2 3
-
ÛÛ3 4
$num
ÛÛ4 5
*
ÛÛ6 7
player
ÛÛ8 >
.
ÛÛ> ?
Position
ÛÛ? G
-
ÛÛH I
closestPosition
ÛÛJ Y
)
ÛÛY Z
)
ÛÛZ [
;
ÛÛ[ \
}
ÜÜ 	
public
ÞÞ 
void
ÞÞ 
PayTaxes
ÞÞ 
(
ÞÞ 
int
ÞÞ  
taxes
ÞÞ! &
)
ÞÞ& '
{
ßß 	
player
àà 
.
àà 
Money
àà 
-=
àà 
taxes
àà !
;
àà! "
lblPlayerMoney
áá 
.
áá 
Content
áá "
=
áá# $
$"
áá% '
$str
áá' *
{
áá* +
player
áá+ 1
.
áá1 2
Money
áá2 7
}
áá7 8
$str
áá8 <
"
áá< =
;
áá= >
}
ââ 	
public
ää 
void
ää 
GetPay
ää 
(
ää 
int
ää 
money
ää $
)
ää$ %
{
åå 	
player
ææ 
.
ææ 
Money
ææ 
+=
ææ 
money
ææ !
;
ææ! "
lblPlayerMoney
çç 
.
çç 
Content
çç "
=
çç# $
$"
çç% '
$str
çç' *
{
çç* +
player
çç+ 1
.
çç1 2
Money
çç2 7
}
çç7 8
$str
çç8 <
"
çç< =
;
çç= >
}
èè 	
}
éé 
}êê 0
@D:\Proyectos .NET\UIGameClientTourist\XAMLViews\JoinGame.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
JoinGame !
:" #
Window$ *
{ 
private 
readonly 
int 
IDPlayer %
;% &
private 
readonly 
Service  
.  !$
PlayAsGuestManagerClient! 9
managerClient: G
;G H
private 
readonly 
bool 
	IsInvited '
=( )
false* /
;/ 0
public 
JoinGame 
( 
int 
IdPlayer $
)$ %
{ 	
this 
. 
IDPlayer 
= 
IdPlayer $
;$ %
InitializeComponent 
(  
)  !
;! "
this   
.   
managerClient   
=    
new  ! $
Service  % ,
.  , -$
PlayAsGuestManagerClient  - E
(  E F
)  F G
;  G H
}!! 	
public## 
JoinGame## 
(## 
int## 
IdPlayer## $
,##$ %
bool##& *
	isInvited##+ 4
)##4 5
{$$ 	
this%% 
.%% 
IDPlayer%% 
=%% 
IdPlayer%% $
;%%$ %
this&& 
.&& 
	IsInvited&& 
=&& 
	isInvited&& &
;&&& '
InitializeComponent'' 
(''  
)''  !
;''! "
this(( 
.(( 
managerClient(( 
=((  
new((! $
Service((% ,
.((, -$
PlayAsGuestManagerClient((- E
(((E F
)((F G
;((G H
})) 	
private++ 
void++ 

SearchGame++ 
(++  
object++  &
sender++' -
,++- .
RoutedEventArgs++/ >
e++? @
)++@ A
{,, 	
try-- 
{.. 
if// 
(// 
int// 
.// 
TryParse//  
(//  !
CodeGame//! )
.//) *
Text//* .
,//. /
out//0 3
int//4 7
codeGame//8 @
)//@ A
)//A B
{00 
if11 
(11 
ValidateGame11 $
(11$ %
codeGame11% -
)11- .
)11. /
{22 
OpenLobbyWindow33 '
(33' (
codeGame33( 0
)330 1
;331 2
}44 
}55 
else66 
{77 

MessageBox88 
.88 
Show88 #
(88# $

Properties88$ .
.88. /
	Resources88/ 8
.888 9"
AlertInvalidCode_Label889 O
)88O P
;88P Q
}99 
}:: 
catch;; 
(;; 
	Exception;; 
ex;; 
);;  
{<< 
Console== 
.== 
	WriteLine== !
(==! "
$str==" 9
+==: ;
ex==< >
.==> ?
Message==? F
)==F G
;==G H
}>> 
}?? 	
privateAA 
boolAA 
ValidateGameAA !
(AA! "
intAA" %
codeGameAA& .
)AA. /
{BB 	
boolCC 
resultCC 
=CC 
trueCC 
;CC 
ifEE 
(EE 
managerClientEE 
.EE 
SearchGameByCodeEE .
(EE. /
codeGameEE/ 7
)EE7 8
!=EE9 ;
$numEE< =
)EE= >
{FF 

MessageBoxGG 
.GG 
ShowGG 
(GG  

PropertiesGG  *
.GG* +
	ResourcesGG+ 4
.GG4 5#
ItemNotFoundAlert_LabelGG5 L
)GGL M
;GGM N
resultHH 
=HH 
falseHH 
;HH 
}II 
elseJJ 
ifJJ 
(JJ 
managerClientJJ "
.JJ" #
IsGameOngoingJJ# 0
(JJ0 1
codeGameJJ1 9
)JJ9 :
!=JJ; =
$numJJ> ?
)JJ? @
{KK 

MessageBoxLL 
.LL 
ShowLL 
(LL  

PropertiesLL  *
.LL* +
	ResourcesLL+ 4
.LL4 5%
AlreadyStartedAlert_LabelLL5 N
)LLN O
;LLO P
resultMM 
=MM 
falseMM 
;MM 
}NN 
elseOO 
ifOO 
(OO 
managerClientOO "
.OO" #

IsGameFullOO# -
(OO- .
codeGameOO. 6
)OO6 7
!=OO8 :
$numOO; <
)OO< =
{PP 

MessageBoxQQ 
.QQ 
ShowQQ 
(QQ  

PropertiesQQ  *
.QQ* +
	ResourcesQQ+ 4
.QQ4 5#
FullLineItemAlert_LabelQQ5 L
)QQL M
;QQM N
resultRR 
=RR 
falseRR 
;RR 
}SS 
returnUU 
resultUU 
;UU 
}VV 	
privateXX 
voidXX 
OpenLobbyWindowXX $
(XX$ %
intXX% (
codeGameXX) 1
)XX1 2
{YY 	
LobbyZZ 
lobbyZZ 
;ZZ 
if\\ 
(\\ 
	IsInvited\\ 
)\\ 
{]] 
lobby^^ 
=^^ 
new^^ 
Lobby^^ !
(^^! "
codeGame^^" *
,^^* +
IDPlayer^^, 4
,^^4 5
true^^6 :
)^^: ;
;^^; <
}__ 
else`` 
{aa 
lobbybb 
=bb 
newbb 
Lobbybb !
(bb! "
codeGamebb" *
,bb* +
IDPlayerbb, 4
)bb4 5
;bb5 6
}cc 
thisee 
.ee 
Closeee 
(ee 
)ee 
;ee 
lobbyff 
.ff 
Showff 
(ff 
)ff 
;ff 
}gg 	
}hh 
}ii Å¹
=D:\Proyectos .NET\UIGameClientTourist\XAMLViews\Lobby.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
Lobby 
:  
Window! '
,' ( 
IGameManagerCallback) =
,= >
IFriendsCallback? O
{ 
private 
readonly 
int 
IdPlayer %
;% &
private 
Service 
. 
PlayerClient $
PlayerService% 2
=3 4
new5 8
Service9 @
.@ A
PlayerClientA M
(M N
)N O
;O P
private 
readonly 
Service  
.  !
FriendListClient! 1
friendListService2 C
;C D
private 
Service 
. 
GameManagerClient )
GameManagerClient* ;
;; <
private 
Service 
. 
FriendsClient %
SesionService& 3
;3 4
private 
Service 
. 
Game 
game !
=" #
new$ '
Service( /
./ 0
Game0 4
(4 5
)5 6
;6 7
private   
Service   
.   
Piece   
piecePlayer   )
=  * +
new  , /
Service  0 7
.  7 8
Piece  8 =
(  = >
)  > ?
;  ? @
private!! 

Dictionary!! 
<!! 
string!! !
,!!! "
(!!# $
Border!!$ *
,!!* +
Ellipse!!, 3
)!!3 4
>!!4 5
pieceMappings!!6 C
;!!C D
private"" 
bool"" 
	isInvited"" 
=""  
false""! &
;""& '
public$$ 
Lobby$$ 
($$ 
int$$ 
idGame$$ 
,$$  
int$$! $
idPlayer$$% -
)$$- .
{%% 	
this&& 
.&& 
IdPlayer&& 
=&& 
idPlayer&& $
;&&$ %
InstanceContext'' 
context'' #
=''$ %
new''& )
InstanceContext''* 9
(''9 :
this'': >
)''> ?
;''? @
GameManagerClient(( 
=(( 
new((  #
Service(($ +
.((+ ,
GameManagerClient((, =
(((= >
context((> E
)((E F
;((F G
SesionService)) 
=)) 
new)) 
Service))  '
.))' (
FriendsClient))( 5
())5 6
context))6 =
)))= >
;))> ?
friendListService** 
=** 
new**  #
Service**$ +
.**+ ,
FriendListClient**, <
(**< =
)**= >
;**> ?
SesionService++ 
.++ 
UpdatePlayerSession++ -
(++- .
idPlayer++. 6
)++6 7
;++7 8
InitializeComponent,, 
(,,  
),,  !
;,,! "#
InicializePieceMappings-- #
(--# $
)--$ %
;--% &
InicializeLobby.. 
(.. 
idGame.. "
).." #
;..# $
ShowFriends// 
(// 
idPlayer//  
)//  !
;//! "
}00 	
public22 
Lobby22 
(22 
int22 
idGame22 
,22  
int22! $
idPlayer22% -
,22- .
bool22/ 3
invited224 ;
)22; <
{33 	
this44 
.44 
IdPlayer44 
=44 
idPlayer44 $
;44$ %
this55 
.55 
	isInvited55 
=55 
invited55 $
;55$ %
InstanceContext66 
context66 #
=66$ %
new66& )
InstanceContext66* 9
(669 :
this66: >
)66> ?
;66? @
GameManagerClient77 
=77 
new77  #
Service77$ +
.77+ ,
GameManagerClient77, =
(77= >
context77> E
)77E F
;77F G
SesionService88 
=88 
new88 
Service88  '
.88' (
FriendsClient88( 5
(885 6
context886 =
)88= >
;88> ?
friendListService99 
=99 
new99  #
Service99$ +
.99+ ,
FriendListClient99, <
(99< =
)99= >
;99> ?
SesionService:: 
.:: 
UpdatePlayerSession:: -
(::- .
idPlayer::. 6
)::6 7
;::7 8
InitializeComponent;; 
(;;  
);;  !
;;;! "#
InicializePieceMappings<< #
(<<# $
)<<$ %
;<<% &
InicializeLobby== 
(== 
idGame== "
)==" #
;==# $
ShowFriends>> 
(>> 
idPlayer>>  
)>>  !
;>>! "
}?? 	
privateAA 
voidAA #
InicializePieceMappingsAA ,
(AA, -
)AA- .
{BB 	
pieceMappingsCC 
=CC 
newCC 

DictionaryCC  *
<CC* +
stringCC+ 1
,CC1 2
(CC3 4
BorderCC4 :
,CC: ;
EllipseCC< C
)CCC D
>CCD E
{DD 
{EE 
$strEE !
,EE! "
(EE# $
brdClockPieceEE$ 1
,EE1 2
	ellPiece1EE3 <
)EE< =
}EE> ?
,EE? @
{FF 
$strFF  
,FF  !
(FF" #
brdDuckPieceFF# /
,FF/ 0
	ellPiece2FF1 :
)FF: ;
}FF< =
,FF= >
{GG 
$strGG 
,GG  
(GG! "
brdCarPieceGG" -
,GG- .
	ellPiece3GG/ 8
)GG8 9
}GG: ;
,GG; <
{HH 
$strHH $
,HH$ %
(HH& '
brdPlayDiscPieceHH' 7
,HH7 8
	ellPiece4HH9 B
)HHB C
}HHD E
,HHE F
{II 
$strII 
,II 
(II  
	brdMPieceII  )
,II) *
	ellPiece5II+ 4
)II4 5
}II6 7
,II7 8
{JJ 
$strJJ 
,JJ 
(JJ  !

brdTVPieceJJ! +
,JJ+ ,
	ellPiece6JJ- 6
)JJ6 7
}JJ8 9
}KK 
;KK 
}LL 	
privateNN 
voidNN 
InicializeLobbyNN $
(NN$ %
intNN% (
idGameNN) /
)NN/ 0
{OO 	
ifPP 
(PP 
idGamePP 
==PP 
$numPP 
)PP 
{QQ 

CreateGameRR 
(RR 
)RR 
;RR 
}SS 
elseTT 
{UU 
LoadGameVV 
(VV 
idGameVV 
)VV  
;VV  !
GameManagerClientWW !
.WW! "'
InactivateBeginGameControlsWW" =
(WW= >
idGameWW> D
)WWD E
;WWE F
butStartGameXX 
.XX 

VisibilityXX '
=XX( )

VisibilityXX* 4
.XX4 5
HiddenXX5 ;
;XX; <
}YY 
lblshowCodeGameZZ 
.ZZ 
ContentZZ #
=ZZ$ %
gameZZ& *
.ZZ* +
IdGameZZ+ 1
.ZZ1 2
ToStringZZ2 :
(ZZ: ;
)ZZ; <
;ZZ< =
butGoToLobbyWindow[[ 
.[[ 

Visibility[[ )
=[[* +

Visibility[[, 6
.[[6 7
Hidden[[7 =
;[[= >
Service\\ 
.\\ 
PlayerClient\\  
playerClient\\! -
=\\. /
new\\0 3
Service\\4 ;
.\\; <
PlayerClient\\< H
(\\H I
)\\I J
;\\J K
lblTitleUsername]] 
.]] 
Content]] $
=]]% &
playerClient]]' 3
.]]3 4
GetMyPlayersName]]4 D
(]]D E
IdPlayer]]E M
,]]M N
game]]O S
.]]S T
IdGame]]T Z
)]]Z [
;]][ \
}^^ 	
public`` 
void`` 
ShowFriends`` 
(``  
int``  #
idPlayer``$ ,
)``, -
{aa 	
	wpFriendsbb 
.bb 
Childrenbb 
.bb 
Clearbb $
(bb$ %
)bb% &
;bb& '
foreachcc 
(cc 

FriendListcc 
friendcc  &
incc' )
friendListServicecc* ;
.cc; <

GetFriendscc< F
(ccF G
idPlayerccG O
)ccO P
)ccP Q
{dd 
Borderee 
brdBackgroundee $
=ee% &
newee' *
Borderee+ 1
{ff 
Widthgg 
=gg 
$numgg 
,gg  
Heighthh 
=hh 
$numhh 
,hh  

Backgroundii 
=ii  
Brushesii! (
.ii( )
	LightBlueii) 2
,ii2 3
Marginjj 
=jj 
newjj  
	Thicknessjj! *
(jj* +
$numjj+ ,
)jj, -
,jj- .
}kk 
;kk 
Gridmm 
gridmm 
=mm 
newmm 
Gridmm  $
(mm$ %
)mm% &
;mm& '
Ellipseoo 
ellUserStatusoo %
=oo& '
newoo( +
Ellipseoo, 3
{pp 
Widthqq 
=qq 
$numqq 
,qq 
Heightrr 
=rr 
$numrr 
,rr  
Marginss 
=ss 
newss  
	Thicknessss! *
(ss* +
-ss+ ,
$numss, /
,ss/ 0
$numss1 2
,ss2 3
$numss4 5
,ss5 6
$numss7 8
)ss8 9
,ss9 :
}tt 
;tt 
ifvv 
(vv 
friendvv 
.vv 
IsOnlinevv #
)vv# $
{ww 
ellUserStatusxx !
.xx! "
Fillxx" &
=xx' (
Brushesxx) 0
.xx0 1
Greenxx1 6
;xx6 7
}yy 
elsezz 
{{{ 
ellUserStatus|| !
.||! "
Fill||" &
=||' (
Brushes||) 0
.||0 1
Red||1 4
;||4 5
}}} 
Label 
lblUserName !
=" #
new$ '
Label( -
{
 
Content
 
=
 
friend
 $
.
$ %

FriendName
% /
,
/ 0
FontSize
 
=
 
$num
 !
,
! "
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ -
,
- .
$num
/ 0
,
0 1
$num
2 3
,
3 4
$num
5 6
)
6 7
,
7 8
}
 
;
 
grid
 
.
 
Children
 
.
 
Add
 !
(
! "
ellUserStatus
" /
)
/ 0
;
0 1
grid
 
.
 
Children
 
.
 
Add
 !
(
! "
lblUserName
" -
)
- .
;
. /
brdBackground
 
.
 
Child
 #
=
$ %
grid
& *
;
* +
	wpFriends
 
.
 
Children
 "
.
" #
Add
# &
(
& '
brdBackground
' 4
)
4 5
;
5 6
}
 
}
 	
public
 
void
 
PieceSelected
 !
(
! "
object
" (
sender
) /
,
/ 0"
MouseButtonEventArgs
1 E
e
F G
)
G H
{
 	
if
 
(
 
piecePlayer
 
.
 
Name
  
!=
! #
null
$ (
)
( )
{
 

ResetPiece
 
(
 
)
 
;
 
}
 
if
 
(
 
sender
 
is
 
Border
  
selectedToken
! .
&&
/ 1
pieceMappings
2 ?
.
? @
TryGetValue
@ K
(
K L
selectedToken
L Y
.
Y Z
Name
Z ^
,
^ _
out
` c
var
d g
pieces
h n
)
n o
)
o p
{
 
pieces
 
.
 
Item2
 
.
 
Fill
 !
=
" #
new
$ '
SolidColorBrush
( 7
(
7 8
Colors
8 >
.
> ?

Aquamarine
? I
)
I J
;
J K
piecePlayer
 
.
 
ImagenSource
 (
=
) *
$"
+ -
$str
- J
{
J K
selectedToken
K X
.
X Y
Name
Y ]
}
] ^
$str
^ b
"
b c
;
c d
piecePlayer
 
.
 
Name
  
=
! "
selectedToken
# 0
.
0 1
Name
1 5
;
5 6
GameManagerClient
 !
.
! "
SelectedPiece
" /
(
/ 0
game
0 4
,
4 5
piecePlayer
6 A
.
A B
Name
B F
)
F G
;
G H
}
  
butGoToLobbyWindow
 
.
 

Visibility
 )
=
* +

Visibility
, 6
.
6 7
Visible
7 >
;
> ?
}
 	
public
 
void
 

ResetPiece
 
(
 
)
  
{
 	
if
   
(
   
pieceMappings
   
.
   
TryGetValue
   )
(
  ) *
piecePlayer
  * 5
.
  5 6
Name
  6 :
,
  : ;
out
  < ?
var
  @ C
pieces
  D J
)
  J K
)
  K L
{
¡¡ 
pieces
¢¢ 
.
¢¢ 
Item2
¢¢ 
.
¢¢ 
Fill
¢¢ !
=
¢¢" #
(
¢¢$ %
SolidColorBrush
¢¢% 4
)
¢¢4 5
new
¢¢5 8
BrushConverter
¢¢9 G
(
¢¢G H
)
¢¢H I
.
¢¢I J
ConvertFrom
¢¢J U
(
¢¢U V
$str
¢¢V a
)
¢¢a b
;
¢¢b c
GameManagerClient
££ !
.
££! "
UnSelectedPiece
££" 1
(
££1 2
game
££2 6
,
££6 7
piecePlayer
££8 C
.
££C D
Name
££D H
)
££H I
;
££I J
}
¤¤ 
}
¥¥ 	
private
§§ 
void
§§ "
GoMainMenuGameWindow
§§ )
(
§§) *
object
§§* 0
sender
§§1 7
,
§§7 8
RoutedEventArgs
§§9 H
e
§§I J
)
§§J K
{
¨¨ 	
if
©© 
(
©© 
	isInvited
©© 
)
©© 
{
ªª 
OpenMainWindow
«« 
(
«« 
)
««  
;
««  !
}
¬¬ 
else
­­ 
{
®® 
OpenMainMenuGame
¯¯  
(
¯¯  !
IdPlayer
¯¯! )
)
¯¯) *
;
¯¯* +
}
°° 
this
²² 
.
²² 
Close
²² 
(
²² 
)
²² 
;
²² 
}
³³ 	
private
µµ 
void
µµ 
OpenMainWindow
µµ #
(
µµ# $
)
µµ$ %
{
¶¶ 	

MainWindow
·· 

mainWindow
·· !
=
··" #
new
··$ '

MainWindow
··( 2
(
··2 3
)
··3 4
;
··4 5

mainWindow
¸¸ 
.
¸¸ 
Show
¸¸ 
(
¸¸ 
)
¸¸ 
;
¸¸ 
}
¹¹ 	
private
»» 
void
»» 
OpenMainMenuGame
»» %
(
»»% &
int
»»& )
playerId
»»* 2
)
»»2 3
{
¼¼ 	
MainMenuGame
½½ 
mainMenuGame
½½ %
=
½½& '
new
½½( +
MainMenuGame
½½, 8
(
½½8 9
playerId
½½9 A
)
½½A B
;
½½B C
mainMenuGame
¾¾ 
.
¾¾ 
Show
¾¾ 
(
¾¾ 
)
¾¾ 
;
¾¾  
}
¿¿ 	
private
ÂÂ 
void
ÂÂ (
NavigateToCreateGameWindow
ÂÂ /
(
ÂÂ/ 0
object
ÂÂ0 6
sender
ÂÂ7 =
,
ÂÂ= >
RoutedEventArgs
ÂÂ? N
e
ÂÂO P
)
ÂÂP Q
{
ÃÃ 	
GameManagerClient
ÄÄ 
.
ÄÄ 
UnSelectedPiece
ÄÄ -
(
ÄÄ- .
this
ÄÄ. 2
.
ÄÄ2 3
game
ÄÄ3 7
,
ÄÄ7 8
piecePlayer
ÄÄ9 D
.
ÄÄD E
Name
ÄÄE I
)
ÄÄI J
;
ÄÄJ K
GameManagerClient
ÅÅ 
.
ÅÅ %
UnCheckReadyToStartGame
ÅÅ 5
(
ÅÅ5 6
game
ÅÅ6 :
)
ÅÅ: ;
;
ÅÅ; < 
butGoToLobbyWindow
ÆÆ 
.
ÆÆ 

Visibility
ÆÆ )
=
ÆÆ* +

Visibility
ÆÆ, 6
.
ÆÆ6 7
Hidden
ÆÆ7 =
;
ÆÆ= >
grdLobbyWindow
ÇÇ 
.
ÇÇ 

Visibility
ÇÇ %
=
ÇÇ& '

Visibility
ÇÇ( 2
.
ÇÇ2 3
	Collapsed
ÇÇ3 <
;
ÇÇ< =!
grdCreateGameWindow
ÈÈ 
.
ÈÈ  

Visibility
ÈÈ  *
=
ÈÈ+ ,

Visibility
ÈÈ- 7
.
ÈÈ7 8
Visible
ÈÈ8 ?
;
ÈÈ? @
}
ÉÉ 	
private
ËË 
void
ËË #
NavigateToLobbyWindow
ËË *
(
ËË* +
object
ËË+ 1
sender
ËË2 8
,
ËË8 9
RoutedEventArgs
ËË: I
e
ËËJ K
)
ËËK L
{
ÌÌ 	
imgPlayerCard
ÍÍ 
.
ÍÍ 
Source
ÍÍ  
=
ÍÍ! "
ImageManager
ÍÍ# /
.
ÍÍ/ 0
GetSourceImage
ÍÍ0 >
(
ÍÍ> ?
piecePlayer
ÍÍ? J
.
ÍÍJ K
ImagenSource
ÍÍK W
)
ÍÍW X
;
ÍÍX Y
GameManagerClient
ÎÎ 
.
ÎÎ #
CheckReadyToStartGame
ÎÎ 3
(
ÎÎ3 4
game
ÎÎ4 8
)
ÎÎ8 9
;
ÎÎ9 :
GameManagerClient
ÏÏ 
.
ÏÏ 
SelectedPiece
ÏÏ +
(
ÏÏ+ ,
this
ÏÏ, 0
.
ÏÏ0 1
game
ÏÏ1 5
,
ÏÏ5 6
piecePlayer
ÏÏ7 B
.
ÏÏB C
Name
ÏÏC G
)
ÏÏG H
;
ÏÏH I
grdLobbyWindow
ÐÐ 
.
ÐÐ 

Visibility
ÐÐ %
=
ÐÐ& '

Visibility
ÐÐ( 2
.
ÐÐ2 3
Visible
ÐÐ3 :
;
ÐÐ: ;!
grdCreateGameWindow
ÑÑ 
.
ÑÑ  

Visibility
ÑÑ  *
=
ÑÑ+ ,

Visibility
ÑÑ- 7
.
ÑÑ7 8
	Collapsed
ÑÑ8 A
;
ÑÑA B
GameManagerClient
ÒÒ 
.
ÒÒ 
UpdatePlayerGame
ÒÒ .
(
ÒÒ. /
this
ÒÒ/ 3
.
ÒÒ3 4
game
ÒÒ4 8
,
ÒÒ8 9
this
ÒÒ: >
.
ÒÒ> ?
IdPlayer
ÒÒ? G
)
ÒÒG H
;
ÒÒH I
}
ÓÓ 	
private
ÕÕ 
void
ÕÕ 
GoGameWindow
ÕÕ !
(
ÕÕ! "
object
ÕÕ" (
sender
ÕÕ) /
,
ÕÕ/ 0
RoutedEventArgs
ÕÕ1 @
e
ÕÕA B
)
ÕÕB C
{
ÖÖ 	
GameManagerClient
×× 
.
×× 
	StartGame
×× '
(
××' (
this
××( ,
.
××, -
game
××- 1
)
××1 2
;
××2 3
GameManagerClient
ØØ 
.
ØØ 
InitializeGame
ØØ ,
(
ØØ, -
this
ØØ- 1
.
ØØ1 2
game
ØØ2 6
)
ØØ6 7
;
ØØ7 8
}
ÙÙ 	
private
ÛÛ 
int
ÛÛ 
GenerateGameCode
ÛÛ $
(
ÛÛ$ %
)
ÛÛ% &
{
ÜÜ 	
Random
ÝÝ 
random
ÝÝ 
=
ÝÝ 
new
ÝÝ 
Random
ÝÝ  &
(
ÝÝ& '
)
ÝÝ' (
;
ÝÝ( )
int
ÞÞ 
GameCode
ÞÞ 
=
ÞÞ 
random
ÞÞ !
.
ÞÞ! "
Next
ÞÞ" &
(
ÞÞ& '
$num
ÞÞ' ,
,
ÞÞ, -
$num
ÞÞ. 3
)
ÞÞ3 4
;
ÞÞ4 5
return
ßß 
GameCode
ßß 
;
ßß 
}
àà 	
private
ââ 
void
ââ 

CreateGame
ââ 
(
ââ  
)
ââ  !
{
ãã 	
Player
ää 
player
ää 
=
ää 
GetPlayerInfo
ää )
(
ää) *
IdPlayer
ää* 2
)
ää2 3
;
ää3 4
game
åå 
.
åå 
IdGame
åå 
=
åå 
GenerateGameCode
åå *
(
åå* +
)
åå+ ,
;
åå, -
game
ææ 
.
ææ 
Slot
ææ 
=
ææ 
$num
ææ 
;
ææ 
game
çç 
.
çç 
Status
çç 
=
çç 
Service
çç !
.
çç! "
Game
çç" &
.
çç& '
Game_Situation
çç' 5
.
çç5 6
ByStart
çç6 =
;
çç= >
GameManagerClient
èè 
.
èè 
AddGame
èè %
(
èè% &
game
èè& *
)
èè* +
;
èè+ ,
GameManagerClient
éé 
.
éé 
AddPlayerToGame
éé -
(
éé- .
game
éé. 2
.
éé2 3
IdGame
éé3 9
,
éé9 :
player
éé; A
)
ééA B
;
ééB C
GameManagerClient
êê 
.
êê 
UpdatePlayers
êê +
(
êê+ ,
this
êê, 0
.
êê0 1
game
êê1 5
.
êê5 6
IdGame
êê6 <
)
êê< =
;
êê= >
}
ëë 	
private
íí 
void
íí 
LoadGame
íí 
(
íí 
int
íí !
idGame
íí" (
)
íí( )
{
îî 	
this
ïï 
.
ïï 
game
ïï 
=
ïï 
PlayerService
ïï %
.
ïï% &
GetGame
ïï& -
(
ïï- .
idGame
ïï. 4
)
ïï4 5
;
ïï5 6
if
ðð 
(
ðð 
	isInvited
ðð 
)
ðð 
{
ññ 
GameManagerClient
òò !
.
òò! "
AddGuestToGame
òò" 0
(
òò0 1
idGame
òò1 7
,
òò7 8
IdPlayer
òò9 A
)
òòA B
;
òòB C
}
óó 
else
ôô 
{
õõ 
Player
öö 
player
öö 
=
öö 
GetPlayerInfo
öö  -
(
öö- .
IdPlayer
öö. 6
)
öö6 7
;
öö7 8
GameManagerClient
÷÷ !
.
÷÷! "
AddPlayerToGame
÷÷" 1
(
÷÷1 2
idGame
÷÷2 8
,
÷÷8 9
player
÷÷: @
)
÷÷@ A
;
÷÷A B
}
øø 
GameManagerClient
úú 
.
úú 
UpdatePlayers
úú +
(
úú+ ,
this
úú, 0
.
úú0 1
game
úú1 5
.
úú5 6
IdGame
úú6 <
)
úú< =
;
úú= >
}
ûû 	
private
ýý 
Service
ýý 
.
ýý 
Player
ýý 
GetPlayerInfo
ýý ,
(
ýý, -
int
ýý- 0
idPlayer
ýý1 9
)
ýý9 :
{
þþ 	
Service
ÿÿ 
.
ÿÿ 
PlayerClient
ÿÿ  
playerClient
ÿÿ! -
=
ÿÿ. /
new
ÿÿ0 3
Service
ÿÿ4 ;
.
ÿÿ; <
PlayerClient
ÿÿ< H
(
ÿÿH I
)
ÿÿI J
;
ÿÿJ K
Service
 
.
 
Player
 
player
 !
=
" #
new
$ '
Service
( /
.
/ 0
Player
0 6
(
6 7
)
7 8
;
8 9
player
 
.
 
IdPlayer
 
=
 
idPlayer
 &
;
& '
player
 
.
 
Name
 
=
 
playerClient
 &
.
& '
GetPlayerName
' 4
(
4 5
idPlayer
5 =
)
= >
;
> ?
player
 
.
 

properties
 
=
 
null
  $
;
$ %
player
 
.
 
Position
 
=
 
-
 
$num
  
;
  !
player
 
.
 
Jail
 
=
 
false
 
;
  
player
 
.
 
Loser
 
=
 
false
  
;
  !
player
 
.
 
Money
 
=
 
$num
  
;
  !
player
 
.
 
Token
 
=
 
piecePlayer
 &
;
& '
return
 
player
 
;
 
}
 	
public
 
void
 
AddVisualPlayers
 $
(
$ %
)
% &
{
 	
	wpPlayers
 
.
 
Children
 
.
 
Clear
 $
(
$ %
)
% &
;
& '
foreach
 
(
 
var
 
player
 
in
  "
game
# '
.
' (
PlayersInGame
( 5
)
5 6
{
 
Border
 
brdBackground
 $
=
% &
new
' *
Border
+ 1
{
 
Width
 
=
 
$num
 
,
  
Height
 
=
 
$num
 
,
  

Background
 
=
  
Brushes
! (
.
( )
	LightBlue
) 2
,
2 3
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ ,
)
, -
,
- .
}
 
;
 
Grid
 
grid
 
=
 
new
 
Grid
  $
(
$ %
)
% &
;
& '
Label
 
lblUserName
 !
=
" #
new
$ '
Label
( -
{
 
Content
 
=
 
player
 $
.
$ %
Name
% )
,
) *
FontSize
 
=
 
$num
 !
,
! "
Margin
 
=
 
new
  
	Thickness
! *
(
* +
$num
+ -
,
- .
$num
/ 0
,
0 1
$num
2 3
,
3 4
$num
5 6
)
6 7
,
7 8
}
   
;
   
grid
¢¢ 
.
¢¢ 
Children
¢¢ 
.
¢¢ 
Add
¢¢ !
(
¢¢! "
lblUserName
¢¢" -
)
¢¢- .
;
¢¢. /
brdBackground
££ 
.
££ 
Child
££ #
=
££$ %
grid
££& *
;
££* +
	wpPlayers
¤¤ 
.
¤¤ 
Children
¤¤ "
.
¤¤" #
Add
¤¤# &
(
¤¤& '
brdBackground
¤¤' 4
)
¤¤4 5
;
¤¤5 6
}
¥¥ 
}
¦¦ 	
public
¨¨ 
int
¨¨ 

UpdateGame
¨¨ 
(
¨¨ 
)
¨¨ 
{
©© 	
this
ªª 
.
ªª 
game
ªª 
=
ªª 
PlayerService
ªª %
.
ªª% &
GetGame
ªª& -
(
ªª- .
game
ªª. 2
.
ªª2 3
IdGame
ªª3 9
)
ªª9 :
;
ªª: ;
return
«« 
game
«« 
.
«« 
Players
«« 
.
««  
Count
««  %
;
««% &
}
¬¬ 	
public
®® 
void
®® !
UpdateFriendRequest
®® '
(
®®' (
)
®®( )
{
¯¯ 	
return
°° 
;
°° 
}
±± 	
public
³³ 
void
³³ !
UpdateFriendDisplay
³³ '
(
³³' (
)
³³( )
{
´´ 	
ShowFriends
µµ 
(
µµ 
IdPlayer
µµ  
)
µµ  !
;
µµ! "
}
¶¶ 	
public
¸¸ 
void
¸¸ 

GetMessage
¸¸ 
(
¸¸ 
string
¸¸ %
message
¸¸& -
)
¸¸- .
{
¹¹ 	
Border
ºº 
brdBackground
ºº  
=
ºº! "
new
ºº# &
Border
ºº' -
{
»» 
Width
¼¼ 
=
¼¼ 
double
¼¼ 
.
¼¼ 
NaN
¼¼ "
,
¼¼" #
Height
½½ 
=
½½ 
double
½½ 
.
½½  
NaN
½½  #
,
½½# $

Background
¾¾ 
=
¾¾ 
Brushes
¾¾ $
.
¾¾$ %
Transparent
¾¾% 0
,
¾¾0 1
Margin
¿¿ 
=
¿¿ 
new
¿¿ 
	Thickness
¿¿ &
(
¿¿& '
$num
¿¿' (
)
¿¿( )
,
¿¿) *
}
ÀÀ 
;
ÀÀ 
Grid
ÂÂ 
grid
ÂÂ 
=
ÂÂ 
new
ÂÂ 
Grid
ÂÂ  
(
ÂÂ  !
)
ÂÂ! "
;
ÂÂ" #
TextBox
ÄÄ 
txtMessageContent
ÄÄ %
=
ÄÄ& '
new
ÄÄ( +
TextBox
ÄÄ, 3
{
ÅÅ 
Text
ÆÆ 
=
ÆÆ 
message
ÆÆ 
,
ÆÆ 
FontSize
ÇÇ 
=
ÇÇ 
$num
ÇÇ 
,
ÇÇ 
Margin
ÈÈ 
=
ÈÈ 
new
ÈÈ 
	Thickness
ÈÈ &
(
ÈÈ& '
$num
ÈÈ' )
,
ÈÈ) *
$num
ÈÈ+ ,
,
ÈÈ, -
$num
ÈÈ. /
,
ÈÈ/ 0
$num
ÈÈ1 2
)
ÈÈ2 3
,
ÈÈ3 4

IsReadOnly
ÉÉ 
=
ÉÉ 
true
ÉÉ !
,
ÉÉ! "
TextWrapping
ÊÊ 
=
ÊÊ 
TextWrapping
ÊÊ +
.
ÊÊ+ ,
Wrap
ÊÊ, 0
,
ÊÊ0 1

Background
ËË 
=
ËË 
Brushes
ËË $
.
ËË$ %
Transparent
ËË% 0
,
ËË0 1
BorderBrush
ÌÌ 
=
ÌÌ 
Brushes
ÌÌ %
.
ÌÌ% &
Transparent
ÌÌ& 1
,
ÌÌ1 2
}
ÍÍ 
;
ÍÍ 
grid
ÏÏ 
.
ÏÏ 
Children
ÏÏ 
.
ÏÏ 
Add
ÏÏ 
(
ÏÏ 
txtMessageContent
ÏÏ /
)
ÏÏ/ 0
;
ÏÏ0 1
brdBackground
ÐÐ 
.
ÐÐ 
Child
ÐÐ 
=
ÐÐ  !
grid
ÐÐ" &
;
ÐÐ& '
wpChatMessages
ÑÑ 
.
ÑÑ 
Children
ÑÑ #
.
ÑÑ# $
Add
ÑÑ$ '
(
ÑÑ' (
brdBackground
ÑÑ( 5
)
ÑÑ5 6
;
ÑÑ6 7
}
ÒÒ 	
private
ÔÔ 
void
ÔÔ 
SendMessage
ÔÔ  
(
ÔÔ  !
object
ÔÔ! '
sender
ÔÔ( .
,
ÔÔ. /"
MouseButtonEventArgs
ÔÔ0 D
e
ÔÔE F
)
ÔÔF G
{
ÕÕ 	
if
ÖÖ 
(
ÖÖ 
!
ÖÖ 
string
ÖÖ 
.
ÖÖ  
IsNullOrWhiteSpace
ÖÖ *
(
ÖÖ* +
Message
ÖÖ+ 2
.
ÖÖ2 3
Text
ÖÖ3 7
)
ÖÖ7 8
)
ÖÖ8 9
{
×× 
string
ØØ 

PlayerName
ØØ !
=
ØØ" #
GetPlayerInfo
ØØ$ 1
(
ØØ1 2
IdPlayer
ØØ2 :
)
ØØ: ;
.
ØØ; <
Name
ØØ< @
;
ØØ@ A
string
ÙÙ 
message
ÙÙ 
=
ÙÙ  

PlayerName
ÙÙ! +
+
ÙÙ, -
$str
ÙÙ. 2
+
ÙÙ3 4
Message
ÙÙ5 <
.
ÙÙ< =
Text
ÙÙ= A
.
ÙÙA B
Trim
ÙÙB F
(
ÙÙF G
)
ÙÙG H
;
ÙÙH I
GameManagerClient
ÚÚ !
.
ÚÚ! "
SendMessage
ÚÚ" -
(
ÚÚ- .
game
ÚÚ. 2
.
ÚÚ2 3
IdGame
ÚÚ3 9
,
ÚÚ9 :
message
ÚÚ; B
)
ÚÚB C
;
ÚÚC D
Message
ÛÛ 
.
ÛÛ 
Text
ÛÛ 
=
ÛÛ 
$str
ÛÛ !
;
ÛÛ! "
}
ÜÜ 
}
ÝÝ 	
private
ßß 
void
ßß 
SendMessageEnter
ßß %
(
ßß% &
object
ßß& ,
sender
ßß- 3
,
ßß3 4
KeyEventArgs
ßß5 A
e
ßßB C
)
ßßC D
{
àà 	
if
áá 
(
áá 
e
áá 
.
áá 
Key
áá 
==
áá 
Key
áá 
.
áá 
Enter
áá "
&&
áá# %
!
áá& '
string
áá' -
.
áá- . 
IsNullOrWhiteSpace
áá. @
(
áá@ A
Message
ááA H
.
ááH I
Text
ááI M
)
ááM N
)
ááN O
{
ââ 
Service
ãã 
.
ãã 
PlayerClient
ãã $
playerClient
ãã% 1
=
ãã2 3
new
ãã4 7
Service
ãã8 ?
.
ãã? @
PlayerClient
ãã@ L
(
ããL M
)
ããM N
;
ããN O
string
ää 
message
ää 
=
ää  
playerClient
ää! -
.
ää- .
GetMyPlayersName
ää. >
(
ää> ?
IdPlayer
ää? G
,
ääG H
game
ääI M
.
ääM N
IdGame
ääN T
)
ääT U
+
ääV W
$str
ääX \
+
ää] ^
Message
ää_ f
.
ääf g
Text
ääg k
.
ääk l
Trim
ääl p
(
ääp q
)
ääq r
;
äär s
GameManagerClient
åå !
.
åå! "
SendMessage
åå" -
(
åå- .
game
åå. 2
.
åå2 3
IdGame
åå3 9
,
åå9 :
message
åå; B
)
ååB C
;
ååC D
Message
ææ 
.
ææ 
Text
ææ 
=
ææ 
$str
ææ !
;
ææ! "
}
çç 
}
èè 	
public
êê 
void
êê 

MoveToGame
êê 
(
êê 
Service
êê &
.
êê& '
Game
êê' +
game
êê, 0
)
êê0 1
{
ëë 	
Game
ìì 

gameWindow
ìì 
=
ìì 
new
ìì !
Game
ìì" &
(
ìì& '
this
ìì' +
.
ìì+ ,
game
ìì, 0
,
ìì0 1
GetPlayerInfo
ìì2 ?
(
ìì? @
IdPlayer
ìì@ H
)
ììH I
)
ììI J
;
ììJ K
this
íí 
.
íí 
Close
íí 
(
íí 
)
íí 
;
íí 

gameWindow
îî 
.
îî 
Show
îî 
(
îî 
)
îî 
;
îî 
}
ïï 	
public
ññ 
void
ññ 
PreparePieces
ññ !
(
ññ! "
Service
ññ" )
.
ññ) *
Game
ññ* .
game
ññ/ 3
,
ññ3 4
Service
ññ5 <
.
ññ< =
Player
ññ= C
[
ññC D
]
ññD E
playersInGame
ññF S
)
ññS T
{
òò 	
int
óó 

partNumber
óó 
=
óó 
$num
óó 
;
óó 
foreach
ôô 
(
ôô 
var
ôô 
player
ôô 
in
ôô  "
playersInGame
ôô# 0
)
ôô0 1
{
õõ 
Game
öö 
.
öö 
pieces
öö 
[
öö 

partNumber
öö &
]
öö& '
.
öö' (
Source
öö( .
=
öö/ 0
ImageManager
öö1 =
.
öö= >
GetSourceImage
öö> L
(
ööL M
player
ööM S
.
ööS T
Token
ööT Y
.
ööY Z
ImagenSource
ööZ f
)
ööf g
;
öög h
Game
÷÷ 
.
÷÷ 
pieces
÷÷ 
[
÷÷ 

partNumber
÷÷ &
]
÷÷& '
.
÷÷' (

Visibility
÷÷( 2
=
÷÷3 4

Visibility
÷÷5 ?
.
÷÷? @
Visible
÷÷@ G
;
÷÷G H

partNumber
øø 
++
øø 
;
øø 
}
ùù 
}
úú 	
public
üü 
void
üü 

BlockPiece
üü 
(
üü 
string
üü %
piece
üü& +
)
üü+ ,
{
ýý 	
if
þþ 
(
þþ 
pieceMappings
þþ 
.
þþ 
TryGetValue
þþ )
(
þþ) *
piece
þþ* /
,
þþ/ 0
out
þþ1 4
var
þþ5 8
pieces
þþ9 ?
)
þþ? @
)
þþ@ A
{
ÿÿ 
pieces
 
.
 
Item1
 
.
 
	IsEnabled
 &
=
' (
false
) .
;
. /
pieces
 
.
 
Item2
 
.
 
Fill
 !
=
" #
(
$ %
SolidColorBrush
% 4
)
4 5
new
5 8
BrushConverter
9 G
(
G H
)
H I
.
I J
ConvertFrom
J U
(
U V
$str
V _
)
_ `
;
` a
}
 
}
 	
public
 
void
 
UnblockPiece
  
(
  !
string
! '
piece
( -
)
- .
{
 	
if
 
(
 
pieceMappings
 
.
 
TryGetValue
 )
(
) *
piece
* /
,
/ 0
out
1 4
var
5 8
pieces
9 ?
)
? @
)
@ A
{
 
pieces
 
.
 
Item1
 
.
 
	IsEnabled
 &
=
' (
true
) -
;
- .
pieces
 
.
 
Item2
 
.
 
Fill
 !
=
" #
(
$ %
SolidColorBrush
% 4
)
4 5
new
5 8
BrushConverter
9 G
(
G H
)
H I
.
I J
ConvertFrom
J U
(
U V
$str
V a
)
a b
;
b c
}
 
}
 	
public
 
Service
 
.
 
Piece
  
UptdatePiecePlayer
 /
(
/ 0
Service
0 7
.
7 8
Game
8 <
game
= A
)
A B
{
 	
return
 
piecePlayer
 
;
 
}
 	
private
 
void
 +
btnCopiarAlPortapapeles_Click
 2
(
2 3
object
3 9
sender
: @
,
@ A"
MouseButtonEventArgs
B V
e
W X
)
X Y
{
 	
string
 
contenidoLabel
 !
=
" #
lblshowCodeGame
$ 3
.
3 4
Content
4 ;
.
; <
ToString
< D
(
D E
)
E F
;
F G
	Clipboard
 
.
 
SetText
 
(
 
contenidoLabel
 ,
)
, -
;
- .

MessageBox
 
.
 
Show
 
(
 
$str
 ?
,
? @
$str
A H
,
H I
MessageBoxButton
J Z
.
Z [
OK
[ ]
,
] ^
MessageBoxImage
_ n
.
n o
Information
o z
)
z {
;
{ |
}
 	
public
 
void
 #
EnableStartGameButton
 )
(
) *
)
* +
{
 	
butStartGame
 
.
 
	IsEnabled
 "
=
# $
true
% )
;
) *
}
 	
public
 
void
 $
DisableStartGameButton
 *
(
* +
)
+ ,
{
   	
butStartGame
¡¡ 
.
¡¡ 
	IsEnabled
¡¡ "
=
¡¡# $
false
¡¡% *
;
¡¡* +
}
¢¢ 	
}
££ 
}¤¤ Æ_
DD:\Proyectos .NET\UIGameClientTourist\XAMLViews\MainMenuGame.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
MainMenuGame %
:& '
Window( .
,. /
IFriendsCallback0 @
{ 
private 
int 
idPlayer 
; 
private 
TranslateTransform "(
butProfileTranslateTransform# ?
;? @
private 
TranslateTransform "'
butLogOutTranslateTransform# >
;> ?
Service 
. 
FriendsClient 
SesionContext +
;+ ,
private 
bool 
areButtonsVisible &
=' (
false) .
;. /
public   
MainMenuGame   
(   
int   
idPlayer    (
)  ( )
{!! 	
this"" 
."" 
idPlayer"" 
="" 
idPlayer"" $
;""$ %
InitializeComponent## 
(##  
)##  !
;##! "
InitializeAnimation$$ 
($$  
)$$  !
;$$! "
InstanceContext%% 
context%% #
=%%$ %
new%%& )
InstanceContext%%* 9
(%%9 :
this%%: >
)%%> ?
;%%? @
SesionContext&& 
=&& 
new&& 
Service&&  '
.&&' (
FriendsClient&&( 5
(&&5 6
context&&6 =
)&&= >
;&&> ?
Service'' 
.'' 
PlayerClient''  
playerClient''! -
=''. /
new''0 3
Service''4 ;
.''; <
PlayerClient''< H
(''H I
)''I J
;''J K
lblPlayerName(( 
.(( 
Content(( !
=((" #
playerClient(($ 0
.((0 1
GetPlayerName((1 >
(((> ?
idPlayer((? G
)((G H
;((H I
SesionContext)) 
.)) 
SavePlayerSession)) +
())+ ,
idPlayer)), 4
)))4 5
;))5 6
}** 	
private,, 
void,, 
InitializeAnimation,, (
(,,( )
),,) *
{-- 	(
butProfileTranslateTransform.. (
=..) *
new..+ .
TranslateTransform../ A
(..A B
)..B C
;..C D

butProfile// 
.// 
RenderTransform// &
=//' ((
butProfileTranslateTransform//) E
;//E F'
butLogOutTranslateTransform00 '
=00( )
new00* -
TranslateTransform00. @
(00@ A
)00A B
;00B C
	butLogOut11 
.11 
RenderTransform11 %
=11& ''
butLogOutTranslateTransform11( C
;11C D
}22 	
private44 
void44 
OpenSlidingMenu44 $
(44$ %
object44% +
sender44, 2
,442 3 
MouseButtonEventArgs444 H
e44I J
)44J K
{55 	
if66 
(66 
areButtonsVisible66 !
)66! "
{77 
HideButtons88 
(88 
)88 
;88 
}99 
else:: 
{;; 
ShowButtons<< 
(<< 
)<< 
;<< 
}== 
}>> 	
private@@ 
void@@ 
ShowButtons@@  
(@@  !
)@@! "
{AA 	
DoubleAnimationBB 
moveButProfileBB *
=BB+ ,
newBB- 0
DoubleAnimationBB1 @
(BB@ A
$numBBA B
,BBB C
$numBBD F
,BBF G
TimeSpanBBH P
.BBP Q
FromSecondsBBQ \
(BB\ ]
$numBB] `
)BB` a
)BBa b
;BBb c(
butProfileTranslateTransformCC (
.CC( )
BeginAnimationCC) 7
(CC7 8
TranslateTransformCC8 J
.CCJ K
	YPropertyCCK T
,CCT U
moveButProfileCCV d
)CCd e
;CCe f
DoubleAnimationDD 
moveButLogOutDD )
=DD* +
newDD, /
DoubleAnimationDD0 ?
(DD? @
$numDD@ A
,DDA B
$numDDC F
,DDF G
TimeSpanDDH P
.DDP Q
FromSecondsDDQ \
(DD\ ]
$numDD] `
)DD` a
)DDa b
;DDb c'
butLogOutTranslateTransformEE '
.EE' (
BeginAnimationEE( 6
(EE6 7
TranslateTransformEE7 I
.EEI J
	YPropertyEEJ S
,EES T
moveButLogOutEEU b
)EEb c
;EEc d
areButtonsVisibleFF 
=FF 
trueFF  $
;FF$ %
}GG 	
privateII 
voidII 
HideButtonsII  
(II  !
)II! "
{JJ 	
DoubleAnimationKK 
moveButProfileKK *
=KK+ ,
newKK- 0
DoubleAnimationKK1 @
(KK@ A
$numKKA C
,KKC D
$numKKE F
,KKF G
TimeSpanKKH P
.KKP Q
FromSecondsKKQ \
(KK\ ]
$numKK] `
)KK` a
)KKa b
;KKb c(
butProfileTranslateTransformLL (
.LL( )
BeginAnimationLL) 7
(LL7 8
TranslateTransformLL8 J
.LLJ K
	YPropertyLLK T
,LLT U
moveButProfileLLV d
)LLd e
;LLe f
DoubleAnimationMM 
moveButLogOutMM )
=MM* +
newMM, /
DoubleAnimationMM0 ?
(MM? @
$numMM@ C
,MMC D
$numMME F
,MMF G
TimeSpanMMH P
.MMP Q
FromSecondsMMQ \
(MM\ ]
$numMM] `
)MM` a
)MMa b
;MMb c'
butLogOutTranslateTransformNN '
.NN' (
BeginAnimationNN( 6
(NN6 7
TranslateTransformNN7 I
.NNI J
	YPropertyNNJ S
,NNS T
moveButLogOutNNU b
)NNb c
;NNc d
areButtonsVisibleOO 
=OO 
falseOO  %
;OO% &
}PP 	
privateRR 
voidRR %
GoToLobbyFromMainMenuGameRR .
(RR. /
objectRR/ 5
senderRR6 <
,RR< = 
MouseButtonEventArgsRR> R
eRRS T
)RRT U
{SS 	
LobbyTT 
lobbyWindowTT 
=TT 
newTT  #
LobbyTT$ )
(TT) *
$numTT* +
,TT+ ,
idPlayerTT- 5
)TT5 6
;TT6 7
thisUU 
.UU 
CloseUU 
(UU 
)UU 
;UU 
lobbyWindowVV 
.VV 
ShowVV 
(VV 
)VV 
;VV 
}WW 	
privateYY 
voidYY !
GoToGamesFromMainMenuYY *
(YY* +
objectYY+ 1
senderYY2 8
,YY8 9 
MouseButtonEventArgsYY: N
eYYO P
)YYP Q
{ZZ 	
grdMainMenu[[ 
.[[ 

Visibility[[ "
=[[# $

Visibility[[% /
.[[/ 0
	Collapsed[[0 9
;[[9 :
grdGames\\ 
.\\ 

Visibility\\ 
=\\  !

Visibility\\" ,
.\\, -
Visible\\- 4
;\\4 5
}]] 	
private__ 
void__ '
GoToFriendsFromMainMenuGame__ 0
(__0 1
object__1 7
sender__8 >
,__> ? 
MouseButtonEventArgs__@ T
e__U V
)__V W
{`` 	
Friendsaa 
friendsWindowaa !
=aa" #
newaa$ '
Friendsaa( /
(aa/ 0
idPlayeraa0 8
)aa8 9
;aa9 :
thisbb 
.bb 
Closebb 
(bb 
)bb 
;bb 
friendsWindowcc 
.cc 
Showcc 
(cc 
)cc  
;cc  !
}dd 	
privateff 
voidff +
GoToUserProfileFromMainMenuGameff 4
(ff4 5
objectff5 ;
senderff< B
,ffB C
RoutedEventArgsffD S
effT U
)ffU V
{gg 	
UserProfilehh 
userProfileWindowhh )
=hh* +
newhh, /
UserProfilehh0 ;
(hh; <
idPlayerhh< D
)hhD E
;hhE F
thisii 
.ii 
Closeii 
(ii 
)ii 
;ii 
userProfileWindowjj 
.jj 
Showjj "
(jj" #
)jj# $
;jj$ %
}kk 	
privatemm 
voidmm -
!GoToConfigurationFromMainMenuGamemm 6
(mm6 7
objectmm7 =
sendermm> D
,mmD E 
MouseButtonEventArgsmmF Z
emm[ \
)mm\ ]
{nn 	
Configurationoo 
configurationWindowoo -
=oo. /
newoo0 3
Configurationoo4 A
(ooA B
idPlayerooB J
)ooJ K
;ooK L
thispp 
.pp 
Closepp 
(pp 
)pp 
;pp 
configurationWindowqq 
.qq  
Showqq  $
(qq$ %
)qq% &
;qq& '
}rr 	
privatett 
voidtt (
GoToJoinGameFromMainMenuGamett 1
(tt1 2
objecttt2 8
sendertt9 ?
,tt? @ 
MouseButtonEventArgsttA U
ettV W
)ttW X
{uu 	
JoinGamevv 
joinGameWindowvv #
=vv$ %
newvv& )
JoinGamevv* 2
(vv2 3
idPlayervv3 ;
)vv; <
;vv< =
thisww 
.ww 
Closeww 
(ww 
)ww 
;ww 
joinGameWindowxx 
.xx 
Showxx 
(xx  
)xx  !
;xx! "
}yy 	
private{{ 
void{{ 
LogOut{{ 
({{ 
object{{ "
sender{{# )
,{{) *
RoutedEventArgs{{+ :
e{{; <
){{< =
{|| 	

MainWindow}} 

mainWindow}} !
=}}" #
new}}$ '

MainWindow}}( 2
(}}2 3
)}}3 4
;}}4 5
this~~ 
.~~ 
Close~~ 
(~~ 
)~~ 
;~~ 

mainWindow 
. 
Show 
( 
) 
; 
}
 	
private
 
void
 #
GoToMainMenuFromGames
 *
(
* +
object
+ 1
sender
2 8
,
8 9"
MouseButtonEventArgs
: N
e
O P
)
P Q
{
 	
grdMainMenu
 
.
 

Visibility
 "
=
# $

Visibility
% /
.
/ 0
Visible
0 7
;
7 8
grdGames
 
.
 

Visibility
 
=
  !

Visibility
" ,
.
, -
	Collapsed
- 6
;
6 7
}
 	
private
 
void
 "
NavigateToMenuWindow
 )
(
) *
object
* 0
sender
1 7
,
7 8"
MouseButtonEventArgs
9 M
e
N O
)
O P
{
 	
grdGames
 
.
 

Visibility
 
=
  !

Visibility
" ,
.
, -
	Collapsed
- 6
;
6 7
grdMainMenu
 
.
 

Visibility
 "
=
# $

Visibility
% /
.
/ 0
Visible
0 7
;
7 8
}
 	
public
 
void
 !
UpdateFriendRequest
 '
(
' (
)
( )
{
 	
throw
 
new
 %
NotImplementedException
 -
(
- .
)
. /
;
/ 0
}
 	
public
 
void
 !
UpdateFriendDisplay
 '
(
' (
)
( )
{
 	
throw
 
new
 %
NotImplementedException
 -
(
- .
)
. /
;
/ 0
}
 	
}
 
} Ê0
GD:\Proyectos .NET\UIGameClientTourist\XAMLViews\RegisterPlayers.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
RegisterPlayers (
:) *
Window+ 1
{ 
public 
RegisterPlayers 
( 
)  
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
RegisterPlayer #
(# $
object$ *
sender+ 1
,1 2
RoutedEventArgs3 B
eC D
)D E
{ 	
string 
message 
; 
try 
{   
if!! 
(!! 
!!! 
string!! 
.!! 
IsNullOrEmpty!! )
(!!) *
txtUserName!!* 5
.!!5 6
Text!!6 :
)!!: ;
&&!!< >
!!!? @
string!!@ F
.!!F G
IsNullOrEmpty!!G T
(!!T U
txtPassword!!U `
.!!` a
Text!!a e
)!!e f
&&!!g i
!!!j k
string!!k q
.!!q r
IsNullOrEmpty!!r 
(	!! 
txtEmail
!! 
.
!! 
Text
!! 
)
!! 
)
!! 
{"" 
var## 
	newPlayer## !
=##" #
new##$ '
	PlayerSet##( 1
{##2 3
Nickname##4 <
=##= >
txtUserName##? J
.##J K
Text##K O
,##O P
Password##Q Y
=##Z [
txtPassword##\ g
.##g h
Text##h l
,##l m
eMail##n s
=##t u
txtEmail##v ~
.##~ 
Text	## 
}
## 
;
## 
Service$$ 
.$$ 
PlayerClient$$ (
player$$) /
=$$0 1
new$$2 5
Service$$6 =
.$$= >
PlayerClient$$> J
($$J K
)$$K L
;$$L M
player%% 
.%% 
RegisterPlayer%% )
(%%) *
	newPlayer%%* 3
)%%3 4
;%%4 5
CleanFields&& 
(&&  
)&&  !
;&&! "
message'' 
='' 
$str'' ^
;''^ _
})) 
else** 
{++ 
InvalidCampsAlert,, %
(,,% &
),,& '
;,,' (
message-- 
=-- 
$str-- W
;--W X
}.. 
}// 
catch00 
(00 
	Exception00 
ex00 
)00  
{11 
Console22 
.22 
	WriteLine22 !
(22! "
$"22" $
$str22$ C
{22C D
ex22D F
.22F G
Message22G N
}22N O
"22O P
)22P Q
;22Q R
message33 
=33 
$str33 g
;33g h
}44 

MessageBox55 
.55 
Show55 
(55 
message55 #
,55# $
$str55% 2
,552 3
MessageBoxButton554 D
.55D E
OK55E G
,55G H
MessageBoxImage55I X
.55X Y
Information55Y d
)55d e
;55e f
}66 	
private88 
void88 (
GoToLoginFromRegisterPlayers88 1
(881 2
object882 8
sender889 ?
,88? @
RoutedEventArgs88A P
e88Q R
)88R S
{99 	

MainWindow:: 
loginWindow:: "
=::# $
new::% (

MainWindow::) 3
(::3 4
)::4 5
;::5 6
this;; 
.;; 
Close;; 
(;; 
);; 
;;; 
loginWindow<< 
.<< 
Show<< 
(<< 
)<< 
;<< 
}== 	
private?? 
void?? 
CleanFields??  
(??  !
)??! "
{@@ 	
txtUserNameAA 
.AA 
TextAA 
=AA 
$strAA !
;AA! "
txtPasswordBB 
.BB 
TextBB 
=BB 
$strBB !
;BB! "
txtEmailCC 
.CC 
TextCC 
=CC 
$strCC 
;CC 
txtConfirmPasswordDD 
.DD 
TextDD #
=DD$ %
$strDD& (
;DD( )
txtConfirmCodeEE 
.EE 
TextEE 
=EE  !
$strEE" $
;EE$ %
}FF 	
privateHH 
voidHH 
InvalidCampsAlertHH &
(HH& '
)HH' (
{II 	
txtUserNameJJ 
.JJ 
BorderBrushJJ #
=JJ$ %
BrushesJJ& -
.JJ- .
RedJJ. 1
;JJ1 2
txtUserNameKK 
.KK 

ForegroundKK "
=KK# $
BrushesKK% ,
.KK, -
RedKK- 0
;KK0 1
txtPasswordLL 
.LL 
BorderBrushLL #
=LL$ %
BrushesLL& -
.LL- .
RedLL. 1
;LL1 2
txtPasswordMM 
.MM 

ForegroundMM "
=MM# $
BrushesMM% ,
.MM, -
RedMM- 0
;MM0 1
txtConfirmPasswordNN 
.NN 
BorderBrushNN *
=NN+ ,
BrushesNN- 4
.NN4 5
RedNN5 8
;NN8 9
txtConfirmPasswordOO 
.OO 

ForegroundOO )
=OO* +
BrushesOO, 3
.OO3 4
RedOO4 7
;OO7 8
txtEmailPP 
.PP 
BorderBrushPP  
=PP! "
BrushesPP# *
.PP* +
RedPP+ .
;PP. /
txtEmailQQ 
.QQ 

ForegroundQQ 
=QQ  !
BrushesQQ" )
.QQ) *
RedQQ* -
;QQ- .
txtConfirmCodeRR 
.RR 
BorderBrushRR &
=RR' (
BrushesRR) 0
.RR0 1
RedRR1 4
;RR4 5
txtConfirmCodeSS 
.SS 

ForegroundSS %
=SS& '
BrushesSS( /
.SS/ 0
RedSS0 3
;SS3 4
}TT 	
}UU 
}VV É
CD:\Proyectos .NET\UIGameClientTourist\XAMLViews\UserProfile.xaml.cs
	namespace 	
UIGameClientTourist
 
. 
	XAMLViews '
{ 
public 

partial 
class 
UserProfile $
:% &
Window' -
{ 
private 
int 
idPlayer 
; 
public 
UserProfile 
( 
int 
idPlayer '
)' (
{ 	
InitializeComponent 
(  
)  !
;! "
this 
. 
idPlayer 
= 
idPlayer $
;$ %
} 	
private 
void "
NavigateToMainMenuGame +
(+ ,
object, 2
sender3 9
,9 :
RoutedEventArgs; J
eK L
)L M
{ 	
MainMenuGame 

menuWindow #
=$ %
new& )
MainMenuGame* 6
(6 7
idPlayer7 ?
)? @
;@ A
this   
.   
Close   
(   
)   
;   

menuWindow!! 
.!! 
Show!! 
(!! 
)!! 
;!! 
}"" 	
private$$ 
void$$ 
ProfileImage_Click$$ '
($$' (
object$$( .
sender$$/ 5
,$$5 6 
MouseButtonEventArgs$$7 K
e$$L M
)$$M N
{%% 	
Border&& 
selectedBorder&& !
=&&" #
(&&$ %
Border&&% +
)&&+ ,
sender&&, 2
;&&2 3
selectedBorder'' 
.'' 
BorderBrush'' &
=''' (
Brushes'') 0
.''0 1
Green''1 6
;''6 7
Image(( 
selectedImage(( 
=((  !
(((" #
Image((# (
)((( )
selectedBorder(() 7
.((7 8
Child((8 =
;((= >
string)) 
selectedImagePath)) $
=))% &
selectedImage))' 4
.))4 5
Source))5 ;
.)); <
ToString))< D
())D E
)))E F
;))F G
imgUserProfile** 
.** 
Source** !
=**" #
ImageManager**$ 0
.**0 1
GetSourceImage**1 ?
(**? @
selectedImagePath**@ Q
)**Q R
;**S T
}++ 	
},, 
}-- ô
1D:\Proyectos .NET\UIGameClientTourist\App.xaml.cs
	namespace 	
UIGameClientTourist
 
{ 
public 

partial 
class 
App 
: 
Application *
{ 
	protected 
override 
void 
	OnStartup  )
() *
StartupEventArgs* :
e; <
)< =
{ 	
base 
. 
	OnStartup 
( 
e 
) 
; 
SetAppCulture 
( 
$str !
)! "
;" #
MusicService 
. 
Instance !
.! "
	PlayMusic" +
(+ ,
), -
;- .
} 	
public 
static 
void 
SetAppCulture (
(( )
string) /
cultureCode0 ;
); <
{ 	
try 
{ 
System 
. 
	Threading  
.  !
Thread! '
.' (
CurrentThread( 5
.5 6
CurrentUICulture6 F
=G H
newI L
CultureInfoM X
(X Y
cultureCodeY d
)d e
;e f
} 
catch 
( 
	Exception 
ex 
)  
{ 

MessageBox 
. 
Show 
(  
$"  "
$str" >
{> ?
ex? A
.A B
MessageB I
}I J
"J K
,K L
$strM T
,T U
MessageBoxButtonV f
.f g
OKg i
,i j
MessageBoxImagek z
.z {
Error	{ 
)
 
;
 
} 
} 	
} 
}   ¶
6D:\Proyectos .NET\UIGameClientTourist\GameLogic\Bid.cs
	namespace 	
UIGameClientTourist
 
. 
	GameLogic '
{ 
public 

class 
Bid 
{ 
public 
int 
IdPlayer 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
BidMoney 
{ 
get !
;! "
set# &
;& '
}( )
} 
}		 »
?D:\Proyectos .NET\UIGameClientTourist\GameLogic\ImageManager.cs
	namespace 	
UIGameClientTourist
 
. 
	GameLogic '
{ 
public 

class 
ImageManager 
{ 
	protected 
ImageManager 
( 
)  
{! "
}# $
public

 
static

 
BitmapImage

 !
GetSourceImage

" 0
(

0 1
string

1 7
path

8 <
)

< =
{ 	
BitmapImage 
bitmapImage #
=$ %
new& )
BitmapImage* 5
(5 6
new6 9
Uri: =
(= >
path> B
,B C
UriKindD K
.K L
RelativeOrAbsoluteL ^
)^ _
)_ `
;` a
return 
bitmapImage 
; 
} 	
} 
} 
9D:\Proyectos .NET\UIGameClientTourist\GameLogic\Player.cs
	namespace 	
UIGameClientTourist
 
. 
	GameLogic '
{ 
public 

class 
Player 
{ 
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
int 
Money 
{ 
get 
; 
set  #
;# $
}% &
public		 
int		 
Position		 
{		 
get		 !
;		! "
set		# &
;		& '
}		( )
public

 
List

 
<

 
Property

 
>

 

Properties

 (
{

) *
get

+ .
;

. /
set

0 3
;

3 4
}

5 6
public 
Player 
( 
string 
name !
,! "
int# &
money' ,
,, -
int. 1
position2 :
): ;
{ 	
Name 
= 
name 
; 
this 
. 
Money 
= 
money 
; 
this 
. 
Position 
= 
position $
;$ %
} 	
public 
Player 
( 
) 
{ 	
} 	
} 
} 
;D:\Proyectos .NET\UIGameClientTourist\GameLogic\Property.cs
	namespace 	
UIGameClientTourist
 
. 
	GameLogic '
{ 
public 

class 
Property 
{ 
private 
Property 
( 
) 
{ 
} 
public 
enum 
TypeProperty  
{! "
Jail# '
,' (
Service) 0
,0 1
Street2 8
}9 :
public 
enum 
PropertySituation %
{& '
Free( ,
,, -
Bought. 4
,4 5
House6 ;
,; <
Hotel= B
}C D
public

 
Property

 
(

 
string

 
name

 #
,

# $
long

% )

buyingCost

* 4
,

4 5
long

6 :
taxes

; @
,

@ A
int

B E
posX

F J
,

J K
int

L O
posY

P T
,

T U
string

V \
imageSource

] h
,

h i
string

j p
color

q v
)

v w
{ 	
Name 
= 
name 
; 
Type 
= 
TypeProperty 
.  
Street  &
;& '

BuyingCost 
= 

buyingCost #
;# $
Taxes 
= 
taxes 
; 
	Situation 
= 
PropertySituation )
.) *
Free* .
;. /
Owner 
= 
null 
; 
PosicitionX 
= 
posX 
; 
PosicitionY 
= 
posY 
; 
ImageSource 
= 
imageSource %
;% &
Color 
= 
color 
; 
} 	
public 
string 
Name 
{ 
get  
;  !
set" %
;% &
}' (
public 
TypeProperty 
Type  
{! "
get# &
;& '
set( +
;+ ,
}- .
public 
long 

BuyingCost 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
long 
Taxes 
{ 
get 
;  
set! $
;$ %
}& '
public 
PropertySituation  
	Situation! *
{+ ,
get- 0
;0 1
set2 5
;5 6
}7 8
public 
Player 
Owner 
{ 
get !
;! "
set# &
;& '
}( )
public 
int 
PosicitionX 
{  
get! $
;$ %
set& )
;) *
}+ ,
public 
int 
PosicitionY 
{  
get! $
;$ %
set& )
;) *
}+ ,
public   
string   
ImageSource   !
{  " #
get  $ '
;  ' (
set  ) ,
;  , -
}  . /
public!! 
string!! 
Color!! 
{!! 
get!! !
;!!! "
set!!# &
;!!& '
}!!( )
}"" 
}## 7
8D:\Proyectos .NET\UIGameClientTourist\MainWindow.xaml.cs
	namespace 	
UIGameClientTourist
 
{ 
public 

partial 
class 

MainWindow #
:$ %
Window& ,
{ 
public 

MainWindow 
( 
) 
{ 	
InitializeComponent 
(  
)  !
;! "
} 	
private 
void 
LogIn 
( 
object !
sender" (
,( )
RoutedEventArgs* 9
e: ;
); <
{ 	
try 
{ 
if 
( 
ValidateInput !
(! "
)" #
)# $
{ 
string 
userName #
=$ %
txtUserName& 1
.1 2
Text2 6
;6 7
string 
password #
=$ %
pwdPassword& 1
.1 2
Password2 :
;: ;
using 
( 
var 
playerClient +
=, -
new. 1
Service2 9
.9 :
PlayerClient: F
(F G
)G H
)H I
{ 
var 
	newPlayer %
=& '
new( +
Service, 3
.3 4
	PlayerSet4 =
{> ?
Nickname@ H
=I J
userNameK S
,S T
PasswordU ]
=^ _
password` h
}i j
;j k
int 
playerID $
=% &
playerClient' 3
.3 4
PlayerSearch4 @
(@ A
	newPlayerA J
)J K
;K L
if   
(   
playerID   $
!=  % '
$num  ( )
)  ) *
{!! 
GoToMenuFromLogin"" -
(""- .
playerID"". 6
)""6 7
;""7 8
}## 
else$$ 
{%% 
InvalidCampsAlert&& -
(&&- .
)&&. /
;&&/ 0

MessageBox'' &
.''& '
Show''' +
(''+ ,
$str'', [
,''[ \
$str''] j
,''j k
MessageBoxButton''l |
.''| }
OK''} 
,	'' 
MessageBoxImage
'' 
.
'' 
Information
'' 
)
'' 
;
'' 
}(( 
})) 
}** 
}++ 
catch,, 
(,, 
	Exception,, 
ex,, 
),,  
{-- 
Console.. 
... 
	WriteLine.. !
(..! "
$".." $
$str..$ =
{..= >
ex..> @
...@ A
Message..A H
}..H I
"..I J
)..J K
;..K L

MessageBox// 
.// 
Show// 
(//  
$str//  g
,//g h
$str//i v
,//v w
MessageBoxButton	//x 
.
// 
OK
// 
,
// 
MessageBoxImage
// 
.
// 
Information
// ¨
)
//¨ ©
;
//© ª
}00 
}11 	
private33 
bool33 
ValidateInput33 "
(33" #
)33# $
{44 	
if55 
(55 
string55 
.55 
IsNullOrEmpty55 $
(55$ %
txtUserName55% 0
.550 1
Text551 5
)555 6
||557 9
string55: @
.55@ A
IsNullOrEmpty55A N
(55N O
pwdPassword55O Z
.55Z [
Password55[ c
)55c d
)55d e
{66 
InvalidCampsAlert77 !
(77! "
)77" #
;77# $

MessageBox88 
.88 
Show88 
(88  
$str88  V
,88V W
$str88X e
,88e f
MessageBoxButton88g w
.88w x
OK88x z
,88z {
MessageBoxImage	88| 
.
88 
Information
88 
)
88 
;
88 
return99 
false99 
;99 
}:: 
return<< 
true<< 
;<< 
}== 	
private?? 
void?? 
GoToMenuFromLogin?? &
(??& '
int??' *
playerID??+ 3
)??3 4
{@@ 	
MainMenuGameAA 
mainMenuGameWindowAA +
=AA, -
newAA. 1
MainMenuGameAA2 >
(AA> ?
playerIDAA? G
)AAG H
;AAH I
thisBB 
.BB 
CloseBB 
(BB 
)BB 
;BB 
mainMenuGameWindowCC 
.CC 
ShowCC #
(CC# $
)CC$ %
;CC% &
}DD 	
privateFF 
voidFF '
GoToRegisterPlayerFromLoginFF 0
(FF0 1
objectFF1 7
senderFF8 >
,FF> ?
RoutedEventArgsFF@ O
eFFP Q
)FFQ R
{GG 	
RegisterPlayersHH !
registerPlayersWindowHH 1
=HH2 3
newHH4 7
RegisterPlayersHH8 G
(HHG H
)HHH I
;HHI J
thisII 
.II 
CloseII 
(II 
)II 
;II !
registerPlayersWindowJJ !
.JJ! "
ShowJJ" &
(JJ& '
)JJ' (
;JJ( )
}KK 	
privateMM 
voidMM 
InvalidCampsAlertMM &
(MM& '
)MM' (
{NN 	
txtUserNameOO 
.OO 
BorderBrushOO #
=OO$ %
BrushesOO& -
.OO- .
RedOO. 1
;OO1 2
txtUserNamePP 
.PP 

ForegroundPP "
=PP# $
BrushesPP% ,
.PP, -
RedPP- 0
;PP0 1
pwdPasswordQQ 
.QQ 
BorderBrushQQ #
=QQ$ %
BrushesQQ& -
.QQ- .
RedQQ. 1
;QQ1 2
pwdPasswordRR 
.RR 

ForegroundRR "
=RR# $
BrushesRR% ,
.RR, -
RedRR- 0
;RR0 1
}SS 	
privateUU 
voidUU !
GoToJoinGameFromLoginUU *
(UU* +
objectUU+ 1
senderUU2 8
,UU8 9
RoutedEventArgsUU: I
eUUJ K
)UUK L
{VV 	
RandomWW 
randomWW 
=WW 
newWW 
RandomWW  &
(WW& '
)WW' (
;WW( )
JoinGameXX 
mainMenuGameWindowXX '
=XX( )
newXX* -
JoinGameXX. 6
(XX6 7
randomXX7 =
.XX= >
NextXX> B
(XXB C
$numXXC D
,XXD E
$numXXF P
)XXP Q
,XXQ R
trueXXS W
)XXW X
;XXX Y
thisYY 
.YY 
CloseYY 
(YY 
)YY 
;YY 
mainMenuGameWindowZZ 
.ZZ 
ShowZZ #
(ZZ# $
)ZZ$ %
;ZZ% &
}[[ 	
}\\ 
}]] 
@D:\Proyectos .NET\UIGameClientTourist\Properties\AssemblyInfo.cs
[ 
assembly 	
:	 

AssemblyTitle 
( 
$str .
). /
]/ 0
[		 
assembly		 	
:			 

AssemblyDescription		 
(		 
$str		 !
)		! "
]		" #
[

 
assembly

 	
:

	 
!
AssemblyConfiguration

  
(

  !
$str

! #
)

# $
]

$ %
[ 
assembly 	
:	 

AssemblyCompany 
( 
$str 
) 
] 
[ 
assembly 	
:	 

AssemblyProduct 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyCopyright 
( 
$str 0
)0 1
]1 2
[ 
assembly 	
:	 

AssemblyTrademark 
( 
$str 
)  
]  !
[ 
assembly 	
:	 

AssemblyCulture 
( 
$str 
) 
] 
[ 
assembly 	
:	 


ComVisible 
( 
false 
) 
] 
[   
assembly   	
:  	 

	ThemeInfo   
(   &
ResourceDictionaryLocation!! 
.!! 
None!! #
,!!# $&
ResourceDictionaryLocation$$ 
.$$ 
SourceAssembly$$ -
)'' 
]'' 
[44 
assembly44 	
:44	 

AssemblyVersion44 
(44 
$str44 $
)44$ %
]44% &
[55 
assembly55 	
:55	 

AssemblyFileVersion55 
(55 
$str55 (
)55( )
]55) *